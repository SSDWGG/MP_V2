/*!
* mudu-player.js v0.37.10
* commit: 9f0ad7d7
* Copyright © 目睹 http://mudu.tv
*/
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("resize-observer-polyfill")):"function"==typeof define&&define.amd?define(["resize-observer-polyfill"],t):(e="undefined"!=typeof globalThis?globalThis:e||self).muduPlayer=t(e.ResizeObserver)}(this,function(e){"use strict";function t(e){return e&&"object"==typeof e&&"default"in e?e:{"default":e}}var n=t(e);function w(e){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,i){return t&&r(e.prototype,t),i&&r(e,i),e}function l(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function g(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{},n=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(i).filter(function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable}))),n.forEach(function(e){l(t,e,i[e])})}return t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?d(e):t}function p(e,t,i){return(p="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,i){var n=function o(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=c(e)););return e}(e,t);if(n){var r=Object.getOwnPropertyDescriptor(n,t);return r.get?r.get.call(i):r.value}})(e,t,i||e)}function m(e){return function n(e){if(Array.isArray(e)){for(var t=0,i=new Array(e.length);t<e.length;t++)i[t]=e[t];return i}}(e)||function t(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function i(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var o=navigator.userAgent,f=function f(e){return null!==o.match(e)};function v(e){return function(){return f(e)}}function y(){return!!N()}function k(){var e=N();return!!(e&&"5.0.2-15"<=e)}var b=v(/gecko\//i),_=v(/trident\/.+rv:\s*11/i),T=v(/iP(hone|od)/i),P=v(/iPad/i),S=v(/Macintosh/i),E=v(/FBAV/i),x=function x(){return f(/\sEdge\/\d+/i)},L=function L(){return f(/msie/i)},M=function M(){return f(/\s(?:(?:Headless)?Chrome|CriOS)\//i)&&!x()&&!f(/UCBrowser/i)},C=function C(){return x()||_()||L()},R=function R(){return f(/safari/i)&&!f(/(?:Chrome|CriOS|chromium|android|phantom)/i)},F=function F(){return f(/iP(hone|ad|od)/i)},A=function A(){return 0<=window.location.href.indexOf("playerdebug")},D=function D(){return navigator.language||navigator.userLanguage||navigator.browserLanguage||navigator.systemLanguage},H=function H(){return!(f(/chrome\/[123456789]/i)&&!f(/chrome\/18/i)&&!b())&&I()},B=function B(){var e=o.toLowerCase();return!!/webkit/.test(e)&&parseFloat(e.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1"))},I=function I(){return f(/Android/i)&&!f(/Windows Phone/i)},O=function O(){return F()||I()||f(/Windows Phone/i)},j=function j(){return-1<f("Windows")},q=function q(){try{return window.self!==window.top}catch(e){return!0}},W=function W(){return z()||V()},z=function z(){var e=o,t=/tbs\/(\d+) /gi.exec(e),i=/wechat|micromessenger/gi.test(e);return!!I()&&(!(!t&&!i)&&(i||"036849"<(t[1]||"")))},V=function V(){var e=/MQQBrowser\/([\d+.]+) /gi.exec(o);return!!I()&&(!!e&&7.1<=+(e[1]||""))},N=function N(){if(I())return 0;var e,t=navigator.plugins;if(t&&(e=t["Shockwave Flash"])&&e.description)return parseFloat(e.description.replace(/\D+(\d+\.?\d*).*/,"$1"));if("undefined"!=typeof window.ActiveXObject){try{if(e=new window.ActiveXObject("ShockwaveFlash.ShockwaveFlash"))return parseFloat(e.GetVariable("$version").split(" ")[1].replace(/\s*,\s*/,"."))}catch(i){return 0}return e}return 0};function U(e,t){if(e&&e.length>t)return e[t]}var Q=navigator.userAgent,X={chrome:M(),edge:x(),firefox:b(),ie:C(),msie:L(),safari:R()};X.version=function Xo(e,t){var i,n,r,o;return e.chrome?i=-1!==t.indexOf("Chrome")?t.substring(t.indexOf("Chrome")+7):t.substring(t.indexOf("CriOS")+6):e.safari?i=t.substring(t.indexOf("Version")+8):e.firefox?i=t.substring(t.indexOf("Firefox")+8):e.edge?i=t.substring(t.indexOf("Edge")+5):e.ie&&(-1!==t.indexOf("rv:")?i=t.substring(t.indexOf("rv:")+3):-1!==t.indexOf("MSIE")&&(i=t.substring(t.indexOf("MSIE")+5))),i&&(-1!==(o=i.indexOf(";"))&&(i=i.substring(0,o)),-1!==(o=i.indexOf(" "))&&(i=i.substring(0,o)),-1!==(o=i.indexOf(")"))&&(i=i.substring(0,o)),n=parseInt(i,10),r=parseInt(i.split(".")[1],10)),{version:i,major:n,minor:r}}(X,Q);var G={android:I(),iOS:F(),mobile:O(),mac:S(),iPad:P(),iPhone:T(),windows:j()};G.version=function Go(e,t){var i,n,r;if(e.windows)switch(i=U(/Windows(?: NT|)? ([._\d]+)/.exec(t),1)){case"6.1":i="7.0";break;case"6.2":i="8.0";break;case"6.3":i="8.1"}else e.android?i=U(/Android ([._\d]+)/.exec(t),1):e.iOS?i=U(/OS ([._\d]+)/.exec(t),1):e.mac&&(i=U(/Mac OS X (10[._\d]+)/.exec(t),1));if(i){n=parseInt(i,10);var o=i.split(/[._]/);o&&(r=parseInt(o[1],10))}return{version:i,major:n,minor:r}}(G,Q);var K={browser:X,os:G,others:{flashInstalled:y(),flashSupported:k(),flashVersion:N(),iframe:q()}},Y=X.version,J=G.version,$=function $(){return JSON.parse(JSON.stringify(K))},Z=Object.freeze({__proto__:null,browserVersion:Y,osVersion:J,getEnvor:$,isFlashInstalled:y,isFlashSupported:k,isFF:b,isIETrident:_,isIPod:T,isIPad:P,isOSX:S,isFacebook:E,isEdge:x,isMSIE:L,isChrome:M,isIE:C,isSafari:R,isIOS:F,isDebugMode:A,getLanguage:D,isAndroidNative:H,getWebkitVersion:B,isAndroid:I,isMobile:O,isWindows:j,isIframe:q,isX5Layer:W,isWxLayer:z,isQQLayer:V,flashVersion:N}),ee=function Ko(e,t,i){if((t-=(e+="").length)<=0)return e;i||0===i||(i=" ");if(" "==(i+="")&&t<10)return te[t]+e;var n="";for(;1&t&&(n+=i),t>>=1;)i+=i;return n+e},te=[""," ","  ","   ","    ","     ","      ","       ","        ","         "];function ie(e,t){var i=Object.prototype.toString.call(t);return"[object ".concat(e.toLowerCase(),"]")===i.toLowerCase()}function ne(e){return ie("number",e)?e<=0?0:e<=1?100*e+"%":e+"px":e}function re(){}var oe=function oe(){return!0},ae=function ae(){return!1};function se(e){var t=[];for(var i in e)t.push(i);return t}function le(e){var t=e<0;t&&(e=-e);var i=function i(e){return e<10?"0"+e:""+e},n=Math.floor(e/3600),r=Math.floor((e-3600*n)/60),o=Math.floor(e-3600*n-60*r),a=(0<n?[n,r,o]:[r,o]).map(i).join(":");return t?"-"+a:a}function ue(e){var t=ke(e);if(t.left)return t.left;var i=e.offsetLeft,n=e.offsetParent,r=document.body.scrollLeft+document.documentElement.scrollLeft;if(document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement)for(;null!==n&&n!==e;)i+=n.offsetLeft,n=n.offsetParent;else for(;null!==n;)i+=n.offsetLeft,n=n.offsetParent;return i-r}var ce=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){return window.setTimeout(e,1e3/60)},de=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCanelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame||function(e){window.clearTimeout(e)};function he(e){for(var t=arguments.length,i=new Array(1<t?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return document.addEventListener?e.addEventListener.apply(e,i):e.attachEvent("on"+i[0],i[1])}function pe(e){for(var t=arguments.length,i=new Array(1<t?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return document.removeEventListener?e.removeEventListener.apply(e,i):e.detachEvent("on"+i[0],i[1])}function fe(e){var n=e.className.split(" ").filter(function(e){return""!==e.replace(" ","")});function t(e){n.push(e),o()}function i(t){var i;i=ie("RegExp",t)?function i(e){return!e.match(t)}:function i(e){return e!==t},n=n.filter(i),o()}function r(e){return 0<=n.indexOf(e)}function o(){n=function a(e,t){for(var i=[],n=[],r=0;r<e.length;r++){var o=t(e[r],r,e);0<=i.indexOf(o)||(n.push(e[r]),i.push(o))}return n}(n,function(e){return e}),e.className=n.join(" ")}return{add:t,remove:i,toggle:function a(e){r(e)?i(e):t(e)},contains:r}}function ve(e){var t=document.createElement("div");return t.innerHTML=e,t.firstChild}function me(l){return l=l||new Date,{format:function u(e){e=e||"YYYY-MM-DD HH:mm:ss.SSS";var t=l.getFullYear(),i=ee(l.getMonth()+1,2,"0"),n=ee(l.getDate(),2,0),r=ee(l.getHours(),2,0),o=ee(l.getMinutes(),2,0),a=ee(l.getSeconds(),2,0),s=ee(l.getMilliseconds(),3,0);return e.replace("YYYY",t).replace("MM",i).replace("DD",n).replace("HH",r).replace("mm",o).replace("ss",a).replace("SSS",s)}}}function ye(e){var t=(e=e||new Date).getFullYear(),i=ee(e.getMonth()+1,2,"0"),n=ee(e.getDate(),2,0),r=ee(e.getHours(),2,0),o=ee(e.getMinutes(),2,0),a=ee(e.getSeconds(),2,0),s=1e6*e.getMilliseconds(),l=-e.getTimezoneOffset(),u=Math.abs(e.getTimezoneOffset()),c=ee(Math.floor(u/60),2,0),d=ee(Math.floor(u%60),2,0),h=l<0?"-":"+",p="".concat(t,"-").concat(i,"-").concat(n),f=0===s?"":".".concat(s),v="".concat(r,":").concat(o,":").concat(a).concat(f),m=0===l?"":"".concat(h).concat(c,":").concat(d),y="".concat(v).concat(m);return"".concat(p,"T").concat(y)}function ge(){return me().format("HHmmss")+we(3)}function ke(e){var t={width:e.offsetWidth,height:e.offsetHeight},i=e.getBoundingClientRect(),n={};return se(i).forEach(function(e){n[e]=i[e]}),g({},t,n)}function be(e){return'<div class="mudu-reset mudu-tooltip-text-wrap">'+'<span class="mudu-reset mudu-tooltip-text">'.concat(e,"</span>")+"</div>"}function _e(e){var i=[];return JSON.stringify(e,function(e,t){if("object"===w(t)&&null!==t){if(-1!==i.indexOf(t))return;i.push(t)}return t})}function we(){for(var e=0<arguments.length&&arguments[0]!==undefined?arguments[0]:3,t="ABCDEFGHIJKLMNOPQRSTUVWXYZ",i=t.toLowerCase(),n=t+i+"0123456789",r="",o=0;o<e;o++)r+=n[Te(0,62)];return r}function Te(e,t){if(e=+e||0,t="number"==typeof+t&&+t?+t:100,(e=Math.floor(e))===(t=Math.floor(t)))return e;var i=Math.abs(e-t);return t<e&&(e=t),e+Math.floor(Math.random()*i)}function Pe(e){return!!ie("number",e)&&(!isNaN(e)&&(e!==Infinity&&e!==-Infinity))}function Se(e,t){if(e instanceof HTMLElement&&ie("object",t))for(var i in t)t.hasOwnProperty(i)&&(e.style[i]=t[i])}function Ee(e,t){var i=new n["default"](function(e){t(e)});return i.observe(e),function(){i.disconnect()}}function xe(e,t,i){return Math.min(Math.max(e,t),i)}var Le=0,Me=function(){function e(){a(this,e),this._listeners={}}return s(e,[{key:"on",value:function(e,t){var i=++Le;return this._listeners[e]=this._listeners[e]||[],this._listeners[e].push({id:i,listener:t,once:!1}),i}},{key:"once",value:function(e,t){var i=++Le;return this._listeners[e]=this._listeners[e]||[],this._listeners[e].push({id:i,listener:t,once:!0}),i}},{key:"off",value:function(e,t){this._listeners[e]=this._listeners[e]||[];for(var i=0;i<this._listeners[e].length;i++){var n=this._listeners[e][i];if(n.id===t||n.listener===t){this._listeners[e].splice(i,1);break}}}},{key:"trigger",value:function(e){for(var t=arguments.length,i=new Array(1<t?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];this._listeners[e]=this._listeners[e]||[];var r=m(this._listeners[e]);A()&&("[event] ".concat(this.constructor.name," ").concat(e," "),_e([].slice.call(arguments)));for(var o=this._listeners[e].length-1;0<=o;o--){var a=this._listeners[e][o];try{a.listener.apply(a,i)}catch(s){throw console.error(s),s}a.once&&r.splice(o,1)}this._listeners[e]=r,"all"!==e&&this.trigger.apply(this,["all",e].concat(i))}},{key:"clear",value:function(){this._listeners={}}}]),e}(),Ce={Pause:"暂停",Speed:"速度",Normal:"正常",Settings:"设置","Full screen":"全屏","Exit full screen":"退出全屏","You can try":"你可以尝试","Switch to Flash":"切换到Flash","Switch to HTML5":"切换到HTML5",Reload:"重新加载","Unknown Error":"未知错误","Network Error":"网络错误","Media Error":"编解码错误",Mute:"静音",Unmute:"取消静音",Quality:"画质",Live:"直播",Autoplay:"自动播放",Captions:"字幕","Copy debug info":"复制排错日志","Upload debug info":"上传排错日志","Skip ahead to live broadcast":"直接跳到现场直播",Select:"选择",Line:"线路"},Re={};for(var Fe in Ce)Re[Fe]=Fe;var Ae={"zh-CN":Ce,"zh-TW":{Pause:"暫停",Speed:"速度",Normal:"正常",Settings:"設置","Full screen":"全螢幕","Exit full screen":"結束全螢幕","You can try":"妳可以嘗試","Switch to Flash":"切換到Flash","Switch to HTML5":"切換到HTML5",Reload:"重新加載","Unknown Error":"未知錯誤","Network Error":"網路錯誤","Media Error":"編解碼錯誤",Mute:"靜音",Unmute:"解除靜音",Quality:"畫質",Live:"直播",Autoplay:"自動播放",Captions:"字幕","Copy debug info":"複製偵錯資訊","Upload debug info":"上傳偵錯資訊","Skip ahead to live broadcast":"直接跳到現場直播",Select:"選擇",Line:"線路"},en:Re};function De(){for(var e,t,i=0;i<this._config.playlist.length;i++){var n=this._config.playlist[i];if(n.active){e=n;break}}for(var r=0;r<e.sources.length;r++){var o=e.sources[r];if(o.active){t=o;break}}var a=t.file,s=je(a),l=qe(s),u=t.type||l;return{file:a,absoluteFile:s,mineType:t.mineType||We(u),type:u,isLive:e.isLive,image:e.image,alwaysDisplayImage:e.alwaysDisplayImage,title:e.title,highlights:e.highlights,playbackMessages:e.playbackMessages,item:e,source:t,isTimeShift:t.isTimeShift,reloadAfterPausing:"undefined"==typeof e.reloadAfterPausing?!!t.reloadAfterPausing:e.reloadAfterPausing,reloadAfterPausingTime:"undefined"==typeof e.reloadAfterPausingTime?t.reloadAfterPausingTime:e.reloadAfterPausingTime,isHideProgress:e.isHideProgress}}function He(i){var n,e=this._config.playlist,t=e.length,r=0;return ie("number",i)&&i<t?n=e[i]:(e.forEach(function(e,t){e.defaultPlay&&(n=e,i=t)}),n||(n=e[0],i=0)),n.sources.forEach(function(e,t){e.defaultPlay&&(r=t)}),Be.call(this,i,r)}function Be(e){var t=1<arguments.length&&arguments[1]!==undefined?arguments[1]:0,i=this._config.playlist,n=!!i[e];if(!n)return n;for(var r=0;r<i.length;r++){i[r].active=r===e;for(var o=0;o<i[r].sources.length;o++)i[r].sources[o]=g({},i[r].sources[o],{active:o===t})}return n}function Ie(){for(var e,t=0;t<this._config.playlist.length;t++){var i=this._config.playlist[t];if(i.active){e=i;break}}return e.sources}function Oe(){var e=0<arguments.length&&arguments[0]!==undefined?arguments[0]:0,t=this._config.playbackRates,i=!!t[e];if(!i&&"null"!==e)return i;for(var n=0;n<t.length;n++)t[n].active=!1,t[n].active=n===e;return i}var je=function je(e){var t=document.createElement("a");return t.setAttribute("href",e),t.href},qe=function qe(e){var t=e.match(/^https?:[^?]+(\.(\w+))\??(?![.\w/])/),i=e.match(/^([a-zA-Z]+):.*/);return t?t[2]:i?i[1]:""},We=function We(e){return{aac:"audio/mp4",mp4:"video/mp4",f4v:"video/mp4",m4v:"video/mp4",mov:"video/mp4",mp3:"audio/mpeg",mpeg:"audio/mpeg",ogv:"video/ogg",ogg:"video/ogg",oga:"video/ogg",vorbis:"video/ogg",webm:"video/webm",f4a:"video/aac",m3u8:"application/vnd.apple.mpegurl",m3u:"application/vnd.apple.mpegurl",hls:"application/vnd.apple.mpegurl",flv:"video/x-flv",rtmp:"rtmp/flv",dash:"application/dash+xml",mpd:"application/dash+xml"}[e]||""},ze=[],Ve=[];function Ne(t,e){var i=2<arguments.length&&arguments[2]!==undefined&&arguments[2],n=m(i?Ve:ze);if(0<n.filter(function(e){return t===e.name}).length)console.warn("provider [".concat(t,"] is existed, so it will not be register twice, you can change a name and retry"));else{var r=e.isHTML5(),o=e.isFlash(),a=e.isPlaybackRateSupported();if(!r&&!o)throw new TypeError("registerProvider(name, Provider): Provider should extends HTML5Provider or FlashProvider");n.push({name:t,html5:r,flash:o,isPlaybackRateSupported:a,Provider:e}),i?(tt({extraProvider:l({},t,e.defaultOptions)}),Ve=n):(tt({provider:l({},t,e.defaultOptions)}),ze=n)}}function Ue(){return ze}function Qe(){return Ve}function Xe(e){var t=e.type,i=e.mineType,n=e.url,r=e.isLive,o=e.isTimeShift,a=(1<arguments.length&&arguments[1]!==undefined?arguments[1]:[]).filter(function(e){return"vr"!==e});return function u(e,o){var a=o.length,s=o.indexOf("html5"),l=o.indexOf("flash"),t=e.map(function(e){var t=o.indexOf(e.name),i=0,n=0;0<=t&&(i+=a-t),0<=s&&e.html5&&(n+=a-s),0<=l&&e.flash&&(n+=a-l);var r=Math.max(i,n);return 0<i&&0<n&&(r+=.5),{p:e,name:e.name,w:r}});return t.sort(function(e,t){return t.w-e.w}),t.map(function(e){return e.p})}(function s(){return Ue().filter(function(e){return e.Provider.isSupported()})}().filter(function(e){return!!e.Provider.canPlay({file:n,type:t,mimeType:i,isLive:r,isTimeShift:o})}),a)[0]}function Ge(e,t){var i=e.type,n=e.mineType,r=e.url,o=e.isLive,a=e.isTimeShift;return function s(){return Qe().filter(function(e){return e.Provider.isSupported()})}().filter(function(e){return!!e.Provider.canPlay({file:r,type:i,mimeType:n,isLive:o,isTimeShift:a})})}var Ke={mute:!1,autoplay:!1,repeat:!1,playbackRatesLabel:"倍速",playbackRates:[],controls:!0,videoLayerControl:!0,aspectratio:"",height:270,width:480,displaytitle:!0,displaydescription:!0,stretching:"contain",qualityLabels:"",renderLoading:"",preload:"none",playlist:[],skin:{name:"default",url:"https://static.mudu.tv/mudu-player/0.37.10/mudu-player.css"},logo:{file:"",hide:!1,link:"",marginw:"3%",marginh:"6%",width:"15%",height:"10%",opacity:1,position:"top-right"},providerOrder:["html5","hlsjs"],plugin:{},provider:{flvjs:{"flv.js":{fixAudioTimestampGap:!0}}},extraProvider:{vr:{use:!1}},fileCdnPath:"https://static.mudu.tv/mudu-player/0.37.10/assets",videoAttributes:g({"x5-video-player-type":"h5-page","webkit-playsinline":"true",playsinline:"","x-webkit-airplay":"allow","mtt-playsinline":!0},W()?{loop:!0}:{}),contextMenus:[{key:"version",text:"Mudu-player v0.37.10",link:"http://mudu.tv/?source=mudu-player"}],errorLogUrl:"",perfLogUrl:"",renderError:null,language:"auto",localization:Ae,showSubtitle:!1,myunSyncTextTrackLabel:"ppt_sync",uniqId:"",enableErrorRetry:!1,errorMaxRetry:10,errorMaxRetryTimeout:15e3,errorRetryDelay:3e3,recordRestrict:{enable360LoneWindowCloseStream:!1},bufferDetectGap:200};function Ye(t,i){var n=g({},t,i);ie("array",i.playbackRates)&&(n.playbackRates=i.playbackRates,n.playbackRatesLabel=i.playbackRatesLabel||n.playbackRatesLabel),n.playlist=i.playlist,n.providerOrder=(ie("array",i.providerOrder)?i.providerOrder:t.providerOrder).slice();var e=ie("object",i.skin)?i.skin:{};n.skin=g({},t.skin,e);var r=ie("object",i.logo)?i.logo:{};n.logo=g({},t.logo,r);var o=ie("object",i.recordRestrict)?i.recordRestrict:{};n.recordRestrict=g({},t.recordRestrict,o),n.localization=g({},t.localization),se(i.localization||{}).forEach(function(e){ie("object",i.localization[e])&&(n.localization[e]=g({},n.localization.en,t.localization[e]||{},i.localization[e]))});var a=ie("object",i.videoAttributes)?i.videoAttributes:{};n.videoAttributes=g({},t.videoAttributes,a);var s=ie("array",i.contextMenus)?i.contextMenus:[];if(n.contextMenus=m(t.contextMenus).concat(m(s)),ie("object",i.plugin)){var l=t.plugin||{};for(var u in i.plugin){var c=l[u]||{},d=i.plugin[u]||{};l[u]=g({},c,d)}n.plugin=l}if(ie("object",i.provider)){var h=t.provider||{};for(var p in i.provider){var f=h[p]||{},v=i.provider[p]||{};h[p]=g({},f,v)}n.provider=h}return n}function Je(e){if(ie("array",e)){var t=[];if(e.forEach(function(e){var n={};Ze(n,e,["isLive","image","alwaysDisplayImage","isHideProgress","description","title","mediaid","defaultPlay","reloadAfterPausing","reloadAfterPausingTime","highlights","playbackMessages"]),ie("string",e.file)&&""!==e.file?(n.sources=[{file:e.file,type:e.type,mineType:e.mineType}],Ze(n.sources[0],e,["type"]),t.push(n)):ie("array",e.sources)&&ie("object",e.sources[0])&&ie("string",e.sources[0].file)&&""!==e.sources[0].file&&(n.sources=[],e.sources.forEach(function(e,t){if(ie("string",e.file)&&""!==e.file){var i={file:e.file,index:t};Ze(i,e,["type","mineType","label","isTimeShift","defaultPlay","reloadAfterPausing","reloadAfterPausingTime","path","path_name"]),n.sources.push(i)}}),t.push(n))}),ie("array",t)&&ie("object",t[0])&&ie("array",t[0].sources)&&ie("object",t[0].sources[0])&&ie("string",t[0].sources[0].file)&&""!==t[0].sources[0].file)return t=t.map(function(o){o.allSources=o.sources.map(function(e){return g({},e)});var e=o.sources.filter(function(e){var t=e.file,i=je(t),n=qe(i),r=e.type||n;return!!Xe({type:r,mineType:e.mineType||We(r),url:t,isLive:o.isLive,isTimeShift:o.isTimeShift},[])});return 0!==e.length&&(o.sources=e),o})}}function $e(e){var t=["type","mineType","isLive","file","image","description","title","playlist","highlights"],i={};for(var n in e)t.indexOf(n)<0&&e!==undefined&&(i[n]=e[n]);if(ie("array",e.playlist))i.playlist=Je(e.playlist);else if(ie("string",e.file)&&e.file){var r={};Ze(r,e,["isLive","image","alwaysDisplayImage","description","isHideProgress","highlights"]);var o={file:e.file,type:e.type,mineType:e.mineType,label:"default",isTimeShift:!!e.isTimeShift||!1,reloadAfterPausing:!!e.reloadAfterPausing,reloadAfterPausingTime:e.reloadAfterPausingTime};r.sources=[o],i.playlist=[r]}return i}function Ze(t,i,e){e.forEach(function(e){ie("undefined",i[e])||(t[e]=i[e])})}function et(){return Ke}function tt(e){Ke=Ye(Ke,$e(e))}var it="mudu-icon-play",nt="mudu-icon-pause",rt="mudu-icon-fullscreen",ot="mudu-icon-setting",at="mudu-icon-check",st="mudu-icon-error",lt=/mudu-icon-[\w-]+/,ut="mudu-aspect",ct="mudu-mask",dt="mudu-video-wrap",ht="mudu-video",pt="mudu-logo-link",ft="mudu-logo",vt="mudu-video-title",mt="mudu-video-danmaku",yt="mudu-subtitle",gt="mudu-subtitle-item",kt="mudu-bezel",bt="mudu-base-layer",_t="mudu-controller-wrap",wt="mudu-controller-mask",Tt="mudu-controller-blank",Pt="mudu-big-play-btn",St="mudu-controller",Et="mudu-icons",xt="mudu-icons-left",Lt="mudu-icon",Mt="mudu-switch-text",Ct="mudu-switch-speed",Rt="mudu-switch-quality",Ft="mudu-switch-path",At="mudu-volume",Dt="mudu-volume-bar-wrap",Ht="mudu-volume-bar",Bt="mudu-volume-bar-inner",It="mudu-thumb",Ot="mudu-time",jt="mudu-ptime",qt="mudu-dtime",Wt="mudu-bar-wrap",zt="mudu-bar-preview",Vt="mudu-bar-popup",Nt="mudu-bar-popup-text",Ut="mudu-bar-img",Qt="mudu-bar-text-wrap",Xt="mudu-bar-text",Gt="mudu-bar-text-time",Kt="mudu-bar-text-text",Yt="mudu-bar-time",Jt="mudu-bar-time-wrap",$t="mudu-bar",Zt="mudu-loaded",ei="mudu-played",ti="mudu-highlight",ii="mudu-dot",ni="mudu-panel",ri="mudu-live-badge",oi="mudu-live-dot",ai="mudu-icons-right",si="mudu-bezel-transition",li="hidden",ui="mudu-flash",ci="mudu-flash-tip",di="mudu-flash-tip-inner",hi="mudu-error-icon",pi="mudu-error-text",fi="mudu-error-wrap",vi="mudu-error-inner",mi="mudu-restrict-360",yi="mudu-background",gi="mudu-always-display-bg",ki="mudu-watermark",bi="mudu-menuitem",_i="mudu-menuitem-label",wi="mudu-panel-menu",Ti="mudu-play-back-rate-panel",Pi="mudu-quality-wrap",Si="mudu-quality-menu",Ei="mudu-quality-menu-item",xi="mudu-quality-item-name",Li="mudu-quality-menu-label",Mi="mudu-quality-menu-item-wrap",Ci="mudu-notice",Ri="mudu-live",Fi="mudu-playback",Ai="mudu-aspect-mode",Di="mudu-hide-controller",Hi="mudu-hide-time",Bi="mudu-state-error",Ii="mudu-mobile",Oi="mudu-flash-disabled",ji="mudu-hide-everything",qi="mudu-flag-small-player",Wi="mudu-time-shift",zi="mudu-play-back-rate",Vi="mudu-hide-progress",Ni="mudu-time-shift-live",Ui=/mudu-state-\w+/,Qi=/mudu-stretch-\w+/,Xi=/mudu-provider-\w+/,Gi=/mudu-play-back-rate-\w+/,Ki="mudu-bezel-icon",Yi="mudu-caption-icon",Ji="mudu-setting-icon",$i="mudu-fullscreen-icon",Zi="mudu-play-icon",en="mudu-volume-icon",tn="mudu-hide",nn="mudu-active",rn="mudu-reset",on={},an=0,sn=1,ln=3,un=function(e){function n(e){var t,i=1<arguments.length&&arguments[1]!==undefined&&arguments[1];return a(this,n),(t=h(this,c(n).call(this))).url=e,t.isStyle=i,t.status=an,t}return u(n,Me),s(n,[{key:"getElement",value:function(){if(this.isStyle){var e=document.createElement("link");return e.type="text/css",e.rel="stylesheet",e.href=this.url,e}var t=document.createElement("script");return t.src=this.url,t}},{key:"getStatus",value:function(){return this.status}},{key:"load",value:function(){var e=this;this.status!==an&&Promise.reject(new Error("loader.load can only call once"));var t=on[this.url];if(t&&t.isStyle===this.isStyle&&t.loader.getStatus()===ln)return setTimeout(function(){e.trigger("done")},0),Promise.resolve();var r=document.getElementsByTagName("head")[0]||document.documentElement,o=this.getElement(),a=this;return new Promise(function(t,i){var n=!1;o.onload=o.onreadystatechange=function(e){n||this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(o.onload=o.onreadystatechange=null),n=!0,setTimeout(function(){a.trigger("done"),a.status=ln,t()},0)},o.onerror=function(e){a.trigger("error"),i(e)},r.insertBefore(o,r.firstChild),a.status=sn,on[a.url]={isStyle:a.isStyle,loader:a}})}}]),n}(),cn="internal_provider_inited",dn="internal_provider_removed",hn="internal_status_formated",pn="internal_key_down",fn="internal_style_loaded",vn="contextMenuClick",mn="play",yn="videoLayerControl",gn="controls",kn="controlsVisible",bn="fullscreen",_n="playlist",wn="playlistItem",Tn="time",Pn="duration",Sn="idle",En="beforePlay",xn="canSeek",Ln="error",Mn="textTrackChange",Cn="textTrackAdd",Rn="textTrackCueChange",Fn="liveEndDetect",An="timeupdate",Dn="duration",Hn="pause",Bn="error",In="texttrackadd",On="texttrackchange",jn="cuechange";function qn(){var e=this,t=this._container,i=this.dom;fe(t).add(ji);var n=this._config.skin;new un(n.url,!0).load().then(function(){fe(t).remove(ji),e.trigger(fn)});var r=function o(e,t,i){return"<style>"+".mudu.".concat(ji," {background: #000;}")+".mudu.".concat(ji," div {display: none !important;}")+".mudu.".concat(ji," span {display: none !important;}")+".mudu.".concat(ji," button {display: none !important;}")+"@font-face{font-family:'mudu-icons';src:url(\"".concat(t,'/fonts/mudu-icons.eot?yyls80");src:url("').concat(t,'/fonts/mudu-icons.eot?yyls80#iefix") format("embedded-opentype"),url("').concat(t,'/fonts/mudu-icons.ttf?yyls80") format("truetype"),url("').concat(t,'/fonts/mudu-icons.woff?yyls80") format("woff"),url("').concat(t,'/fonts/mudu-icons.svg?yyls80#mudu-icons") format("svg");font-weight:normal;font-style:normal}')+"</style>"+'<div class="'.concat(rn," ").concat(ut,'"></div>')+'<div class="'.concat(rn," ").concat(ct,'"></div>')+'<div class="'.concat(rn," ").concat(dt,'">')+'<div class="'.concat(rn," ").concat(ui,'"></div>')+'<div class="'.concat(rn," ").concat(yi,'"></div>')+'<div class="'.concat(rn," ").concat(ki,'"></div>')+'<div class="'.concat(rn," ").concat(kt,'">')+'<span class="'.concat(rn," ").concat(Ki,'"></span>')+"</div></div>"+'<div class="'.concat(rn," ").concat(bt,'"></div>')+'<div class="'.concat(rn," ").concat(ft,'">')+'<a class="'.concat(rn," ").concat(pt,'" target="_blank"><img style="display: none;" /></a>')+"</div>"+'<div class="'.concat(rn," ").concat(mt,'"></div>')+'<div class="'.concat(rn," ").concat(fi,'">')+'<div class="'.concat(rn," ").concat(vi,'">')+'<div class="'.concat(rn," ").concat(hi,'"><span class="').concat(rn," ").concat(st,'"></span></div>')+'<div class="'.concat(rn," ").concat(pi,'">There is some error: </div>')+"</div></div>"+'<div class="'.concat(rn," ").concat(_t,'">')+'<div class="'.concat(rn," ").concat(Tt,'"></div>')+'<div class="'.concat(rn," ").concat(vt,'"></div>')+'<div class="'.concat(rn," ").concat(Pt,'">')+'<button type="button" class="'.concat(rn," ").concat(Lt," ").concat(it,'"></button>')+"</div>"+'<div class="'.concat(yt,'">')+"</div>"+'<div class="'.concat(rn," ").concat(wt,'"></div>')+'<div class="'.concat(rn," ").concat(St,'">')+'<div class="'.concat(rn," ").concat(Et," ").concat(xt,'">')+'<button type="button" class="'.concat(rn," ").concat(Lt," ").concat(Zi,'">')+"</button>"+'<div class="'.concat(rn," ").concat(At,'">')+'<button type="button" class="'.concat(rn," ").concat(Lt," ").concat(en,'" mudu-tooltip placement="top" tooltip-title="').concat(e.Mute,'">')+"</button>"+'<div class="'.concat(rn," ").concat(Dt,'">')+'<div class="'.concat(rn," ").concat(Ht,'">')+'<div class="'.concat(rn," ").concat(Bt,'">')+'<span class="'.concat(rn," ").concat(It,'" style="background: #b7daff;">')+"</span></div></div></div></div>"+'<span class="'.concat(rn," ").concat(ri,'" mudu-tooltip placement="top" tooltip-title="').concat(e["Skip ahead to live broadcast"],'">')+'<span class="'.concat(rn," ").concat(oi,'"></span>')+"Live</span>"+'<span class="'.concat(rn," ").concat(Ot,'">')+'<span class="'.concat(rn," ").concat(jt,'"></span>')+" / "+'<span class="'.concat(rn," ").concat(qt,'"></span>')+"</span></div>"+'<div class="'.concat(rn," ").concat(Et," ").concat(ai,'">')+'<span role="button" class="'.concat(rn," ").concat(Mt," ").concat(Ft,'"></span>')+'<span role="button" class="'.concat(rn," ").concat(Mt," ").concat(Rt,'"></span>')+'<span role="button" class="'.concat(rn," ").concat(Mt," ").concat(zi," ").concat(Ct,'"></span>')+'<button type="button" class="'.concat(rn," ").concat(Lt," ").concat(Yi,'"></button>')+'<button type="button" class="'.concat(rn," ").concat(Lt," ").concat(Ji," ").concat(ot,'"></button>')+'<button type="button" class="'.concat(rn," ").concat(Lt," ").concat($i,'" mudu-tooltip placement="top" tooltip-title="').concat(e["Full screen"],'"></button>')+"</div>"+'<div class="'.concat(rn," ").concat(Wt,'">')+'<div class="'.concat(rn," ").concat(Vt," ").concat(li,'">')+'<div class="'.concat(rn," ").concat(zt,'">')+'<div class="'.concat(rn," ").concat(Ut,'"></div>')+'<div class="'.concat(rn," ").concat(Jt,'">')+'<div class="'.concat(rn," ").concat(Yt,'"></div>')+"</div></div>"+'<div class="'.concat(rn," ").concat(Qt,'">')+'<div class="'.concat(rn," ").concat(Xt,'">')+'<span class="'.concat(rn," ").concat(Gt,'"></span>')+'<span class="'.concat(rn," ").concat(Kt,'"></span>')+"</div></div></div>"+'<div class="'.concat(rn," ").concat($t,'">')+'<div class="'.concat(rn," ").concat(Zt,'"></div>')+'<div class="'.concat(rn," ").concat(ei,'" style="background: #f00;">')+'<span class="'.concat(rn," ").concat(It,'" style="background: #f00;"></span>')+"</div>"+'<div class="'.concat(rn," ").concat(ti,'"></div>')+"</div></div></div></div>"+'<div class="'.concat(rn," ").concat(ci,'">')+'<div class="'.concat(rn," ").concat(di,'"><a href="http://www.adobe.com/go/getflash" target="_blank">检测到您还未安装flash, 请点击这里安装</a></div>')+"</div>"+'<div class="'.concat(rn," ").concat(Ci," ").concat(tn,'"></div>')+'<div class="'.concat(rn," ").concat(mi," ").concat(tn,'"></div>')}(this._status.localization,this._config.fileCdnPath);t.innerHTML=r,fe(t).add(rn),fe(t).add("mudu"),fe(t).add("mudu-hide-setting"),fe(t).add("".concat("mudu-skin","-").concat(n.name)),O()&&fe(t).add(Ii),i.container=t,i.baseLayer=t.querySelector(".".concat(bt)),i.aspect=t.querySelector(".".concat(ut)),i.fullscreen=t.querySelector(".".concat($i)),i.caption=t.querySelector(".".concat(Yi)),i.video=t.querySelector("video"),i.videoWrap=t.querySelector(".".concat(dt)),i.controllerWrap=t.querySelector(".".concat(_t)),i.controller=t.querySelector(".".concat(St)),i.controllerMask=t.querySelector(".".concat(wt)),i.controllerBlank=t.querySelector(".".concat(Tt)),i.controllerRightIcons=t.querySelector(".".concat(ai)),i.leftPlayBtn=t.querySelector(".".concat(Zi)),i.volumeWrap=t.querySelector(".".concat(At)),i.volumeButton=t.querySelector(".".concat(en)),i.volumeBar=t.querySelector(".".concat(Bt)),i.volumeBarWrap=t.querySelector(".".concat(Ht)),i.volumeBarWrapWrap=t.querySelector(".".concat(Dt)),i.playedBar=t.querySelector(".".concat(ei)),i.loadedBar=t.querySelector(".".concat(Zt)),i.playedBarWrap=t.querySelector(".".concat(Wt)),i.barPopup=t.querySelector(".".concat(Vt)),i.barImg=t.querySelector(".".concat(Ut)),i.barTime=i.playedBarTime=t.querySelector(".".concat(Yt)),i.barText=t.querySelector(".".concat(Xt)),i.barTextTime=t.querySelector(".".concat(Gt)),i.barTextText=t.querySelector(".".concat(Kt)),i.ptime=t.querySelector(".".concat(jt)),i.dtime=t.querySelector(".".concat(qt)),i.logoWrap=t.querySelector(".".concat(ft)),i.logoImg=t.querySelector(".".concat(ft," img")),i.logoLink=t.querySelector(".".concat(pt)),i.bezelWrap=t.querySelector(".".concat(kt)),i.bezel=t.querySelector(".".concat(Ki)),i.background=t.querySelector(".".concat(yi)),i.watermark=t.querySelector(".".concat(ki)),i.title=t.querySelector(".".concat(vt)),i.settingBtn=t.querySelector(".".concat(Ji)),i.errorWrap=t.querySelector(".".concat(fi)),i.errorText=t.querySelector(".".concat(pi)),i.highlight=t.querySelector(".".concat(ti)),i.flashTip=t.querySelector(".".concat(ci)),i.flash=t.querySelector(".".concat(ui)),i.notice=t.querySelector(".".concat(Ci)),i.switchQuality=t.querySelector(".".concat(Rt)),i.switchPath=t.querySelector(".".concat(Ft)),i.bigPlayBtn=t.querySelector(".".concat(Pt)),i.recordRestrict360=t.querySelector(".".concat(mi)),i.liveBadge=t.querySelector(".".concat(ri)),i.playbackRate=t.querySelector(".".concat(zi)),this.trigger("internal_dom_inited")}function Wn(e,t){if(!(this instanceof Wn))return new Wn(e,t);this.proto=e,this.target=t}Wn.prototype.method=function(e){var t=this.proto,i=this.target;return t[e]=function(){return A()&&("[delegates]: (".concat(t.constructor.name," | ").concat(i.constructor.name,").").concat(e," --"),_e([].slice.call(arguments))),"model"===i.TAG&&this.trigger("delegate-model",{fn:e,args:[].slice.call(arguments)}),i[e].apply(i,arguments)},this};var zn=function(){function t(e){a(this,t),this.player=e,this.lang=e._status.localization,this.m_player_events=[],this.m_dom_events=[],this.m_provider_events=[],this.m_removed=!1,this.TAG="model"}return s(t,[{key:"provider",value:function(){return this.player._provider&&this.player._provider.instance}},{key:"remove",value:function(){var t=this;this.m_removed=!0,this.m_player_events.forEach(function(e){return t.player.off(e.evt,e.fn)}),this.m_dom_events.forEach(function(e){return pe(e.ele,e.evt,e.fn)}),this.m_provider_events.forEach(function(e){t.provider()&&t.provider().off(e.evt,e.fn)})}},{key:"onPlayer",value:function(e,t){this.player.on(e,t),this.m_player_events.push({evt:e,fn:t})}},{key:"oncePlayer",value:function(e,t){this.player.once(e,t),this.m_player_events.push({evt:e,fn:t})}},{key:"onDom",value:function(e,t,i){he(e,t,i),e===this.player.dom.container&&this.m_dom_events.push({ele:e,evt:t,fn:i})}},{key:"onProvider",value:function(e,t){this.provider()&&(this.provider().on(e,t),this.m_provider_events.push({evt:e,fn:t}))}},{key:"onceProvider",value:function(e,t){this.provider()&&(this.provider().once(e,t),this.m_provider_events.push({evt:e,fn:t}))}}]),t}(),Vn=function(){for(var e,t=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],i=0,n=t.length,r={};i<n;i++)if((e=t[i])&&e[1]in document){for(i=0;i<e.length;i++)r[t[0][i]]=e[i];return r}return!1}();function Nn(){return Boolean(document[Vn.fullscreenEnabled])}var Un={trigger:"hover",placement:"top",container:document.body,distance:10,content:"",getMaxHeight:function(){return"none"},"class":"mudu-tooltip"},Qn="-20000px",Xn=new Me,Gn=[];function Kn(){return 0<Gn.filter(function(e){return e.isShow()}).length}function Yn(){Gn.forEach(function(e){return e.hide()})}function Jn(e){return e&&""===e.getAttribute("mudu-tooltip")}function $n(l){var u=1<arguments.length&&arguments[1]!==undefined?arguments[1]:{};l="string"==typeof l&&l?document.querySelector(l):l,u=g({},Un,u),l&&l.setAttribute("mudu-tooltip","");var i=!0,c=function d(){var e=document.createElement("div");return u.container.appendChild(e),e.setAttribute("class","mudu-reset "+u["class"]),he(e,"click",function(e){e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0}),e.style.cssText="position: absolute; top: 0; left: ".concat(Qn,"; opacity: 0; visibility: hidden;"),e}();e(u.content);var t=Xn.on("mouseover",function(e,t){t===l&&"hover"===u.trigger&&i&&a()}),n=Xn.on("mouseout",function(e,t){t===l&&"hover"===u.trigger&&s()}),r=Xn.on("click",function(e,t){t===l&&"click"===u.trigger&&i&&a()}),o={hide:s,isShow:function h(){return c&&c.style.left!==Qn},destroy:function p(){var e=Gn.indexOf(o);if(e<0)return;Xn.off("mouseover",t),Xn.off("mouseout",n),Xn.off("click",r),c.parentElement.removeChild(c),l&&l.removeAttribute("mudu-tooltip"),Gn.splice(e,1)},getTooltipContainer:function f(){return c},updateContent:e,show:a,getConfig:function v(){return g({},u)},disable:function m(){i=!1,s()},enable:function y(){i=!0}};return Gn.push(o),o;function e(e){"string"==typeof e&&(c.innerHTML=e),"object"===w(e)&&(c.innerHTML="",c.appendChild(e))}function a(){var e=0<arguments.length&&arguments[0]!==undefined?arguments[0]:{},t=e.left,i=e.top;if(function s(){var e=ke(u.container),t=u.getMaxHeight(e);c.style.maxHeight=ne(t)}(),t===undefined&&i===undefined&&"top"===u.placement){var n=ke(u.container),r=ke(c),o=ke(l),a=u.distance;t=o.left+o.width/2-r.width/2-n.left,i=o.top-r.height-a-n.top,t+r.width>n.right&&(t=n.right-r.width),t<0&&(t=n.left)}c.style.left=t+"px",c.style.top=i+"px",c.style.visibility="visible",c.style.opacity=1}function s(){c&&(c.style.left=Qn,c.style.opacity=0,c.style.visibility="hidden")}}$n.isAnyShow=Kn,$n.hideAll=Yn,$n.isAnyClassShow=function Yo(t){return 0<Gn.filter(function(e){return e.isShow()&&e.getConfig()["class"]===t}).length},function Jo(){he(document,"mouseover",function(e){var t=e.target||e.srcElement;Jn(t)&&Xn.trigger("mouseover",e,t)}),he(document,"mouseout",function(e){var t=e.target||e.srcElement;Jn(t)&&Xn.trigger("mouseout",e,t)}),he(document,"click",function(e){var t=e.target||e.srcElement;Kn()?Yn():Jn(t)&&Xn.trigger("click",e,t)})}();var Zn=function(e){function i(e){var t;return a(this,i),(t=h(this,c(i).call(this,e))).isFullscreen=!1,t.subEvents(),Wn(t.player,d(d(t))).method("getFullscreen").method("setFullscreen"),fe(t.player.dom.fullscreen).add(rt),t.fullTip=$n(t.player.dom.fullscreen,{content:be(t.lang["Full screen"]),container:t.player.dom.container}),t}return u(i,zn),s(i,[{key:"subEvents",value:function(){var n=this;this.onDom(this.player.dom.fullscreen,"click",function(){n.setFullscreen(!n.isFullscreen)}),this.onPlayer(cn,function(){n.onProvider("stagedoubleclick",function(){n.setFullscreen(!n.isFullscreen)})}),this.handleFullscreenChange=function(e){var t=function i(){return document[Vn.fullscreenElement]}();O()&&(!t&&!n.isFullscreen||t&&"VIDEO"===t.nodeName)||(t&&t===n.player.dom.container&&!n.isFullscreen||!t&&n.isFullscreen)&&(n.isFullscreen=t===n.player.dom.container,n.onAfterFullScreen())},Nn()&&function t(e){he(document,Vn.fullscreenchange,e)}(this.handleFullscreenChange),O()||this.onDom(this.player.dom.videoWrap,"dblclick",function(){n.player._provider&&n.player._provider.flash||n.player.getControls()&&n.toggle()})}},{key:"onAfterFullScreen",value:function(){var e=this.player.dom;this.player.trigger(bn,{type:bn,fullscreen:this.isFullscreen}),fe(e.container).toggle("mudu-fullscreen"),fe(e.fullscreen).remove(lt),fe(e.fullscreen).add(this.isFullscreen?"mudu-icon-fullscreen-off":rt),this.fullTip.updateContent(be(this.isFullscreen?this.lang["Exit full screen"]:this.lang["Full screen"]))}},{key:"toggle",value:function(){this.setFullscreen(!this.getFullscreen())}},{key:"getFullscreen",value:function(){return this.isFullscreen}},{key:"remove",value:function(){Nn()&&function t(e){pe(document,Vn.fullscreenchange,e)}(this.handleFullscreenChange),p(c(i.prototype),"remove",this).call(this)}},{key:"setFullscreen",value:function(){var e=!(0<arguments.length&&arguments[0]!==undefined)||arguments[0],t=this.player.dom.container,i=this.isFullscreen,n=this.player.dom.container.querySelector(".".concat(ht)),r=this.player._config.extraProvider.vr.use&&this.player.dom.videoWrap.querySelector("canvas");this.player._extraProviders.vr&&r||Nn()?e?!i&&function o(e){e[Vn.requestFullscreen]()}(t):i&&function a(){document[Vn.exitFullscreen]()}():O()&&n.webkitSupportsFullscreen?e?n.webkitEnterFullScreen():n.webkitExitFullScreen():(this.isFullscreen=e,this.onAfterFullScreen())}}]),i}(),er=function er(){return new Error("method should be override")},tr=function(e){function n(e,t){var i;return a(this,n),(i=h(this,c(n).call(this))).player=e,i.option=t,i.p_player_events=[],i.p_dom_events=[],i.p_self_events=[],i.TAG="Provider",i}return u(n,Me),s(n,[{key:"loadFiles",value:function(){return Promise.resolve()}},{key:"getMediaElement",value:function(){}},{key:"createMediaElement",value:function(){}},{key:"setup",value:function(){return Promise.reject(er())}},{key:"remove",value:function(){var t=this;this.p_player_events.forEach(function(e){return t.player.off(e.evt,e.fn)}),this.p_dom_events.forEach(function(e){return pe(e.ele,e.evt,e.fn)}),this.p_self_events.forEach(function(e){return t.off(e.evt,e.fn)})}},{key:"getVolume",value:function(){}},{key:"setVolume",value:function(){}},{key:"getMute",value:function(){}},{key:"setMute",value:function(){}},{key:"getWidth",value:function(){return-1}},{key:"getHeight",value:function(){return-1}},{key:"getMetrics",value:function(){return{}}},{key:"getBuffer",value:function(){return[]}},{key:"getCurrentTime",value:function(){}},{key:"getDuration",value:function(){}},{key:"setStretching",value:function(){}},{key:"getStretching",value:function(){}},{key:"getMetadata",value:function(){}},{key:"play",value:function(){}},{key:"pause",value:function(){}},{key:"seek",value:function(){}},{key:"getPlaybackRate",value:function(){}},{key:"setPlaybackRate",value:function(){}},{key:"getTextTracks",value:function(){return[]}},{key:"setTextTrackActive",value:function(e){}},{key:"onPlayer",value:function(e,t){this.player.on(e,t),this.p_player_events.push({evt:e,fn:t})}},{key:"oncePlayer",value:function(e,t){this.player.once(e,t),this.p_player_events.push({evt:e,fn:t})}},{key:"onDom",value:function(e,t,i){var n=!(3<arguments.length&&arguments[3]!==undefined)||arguments[3];he(e,t,i),n&&this.p_dom_events.push({ele:e,evt:t,fn:i})}},{key:"onSelf",value:function(e,t){this.on(e,t),this.p_self_events.push({evt:e,fn:t})}},{key:"onceSelf",value:function(e,t){this.once(e,t),this.p_self_events.push({evt:e,fn:t})}}]),n}();tr.defaultOptions={},tr.canPlay=re,tr.isSupported=re,tr.isPlaybackRateSupported=re,tr.isFlash=re,tr.isHTML5=re;var ir="application/x-shockwave-flash",nr=[],rr=N(),or=L(),ar=B();function sr(u,d,h,p,f,e,v,m,y,g){var k=d,b={success:!1,id:k};!(ar&&ar<312)&&u&&d&&h&&p&&f?(lr(k,!1),function _(){h+="",p+="";var e={};if(y&&"object"===w(y))for(var t in y)e[t]=y[t];e.data=u,e.width=h,e.height=p;var i={};if(m&&"object"===w(m))for(var n in m)i[n]=m[n];if(v&&"object"===w(v))for(var r in v)if(v.hasOwnProperty(r)){var o=r,a=v[r];"undefined"!=typeof i.flashvars?i.flashvars+="&"+o+"="+a:i.flashvars=o+"="+a}if(function l(e){return(e=parseFloat(e))<=rr}(f)){var s=function c(e,t,i){var n,r=document.getElementById(i);if(ar&&ar<312)return n;if(r){var o,a,s,l=or?document.createElement("div"):document.createElement("object");for(s in"undefined"==typeof e.id&&(e.id=i),t)t.hasOwnProperty(s)&&"movie"!==s.toLowerCase()&&ur(l,s,t[s]);for(o in or&&(l=function u(e,t){var i=document.createElement("div");return i.innerHTML="<object classid='clsid:D27CDB6E-AE6D-11cf-96B8-444553540000'><param name='movie' value='"+e+"'>"+t+"</object>",i.firstChild}(e.data,l.innerHTML)),e)e.hasOwnProperty(o)&&("styleclass"===(a=o.toLowerCase())?l.setAttribute("class",e[o]):"classid"!==a&&"data"!==a&&l.setAttribute(o,e[o]));or?nr[nr.length]=e.id:(l.setAttribute("type",ir),l.setAttribute("data",e.data)),r.parentNode.replaceChild(l,r),n=l}return n}(e,i,d);e.id===k&&lr(k,!0),b.success=!0,b.ref=s,b.id=s.id}else lr(k,!0);g&&g(b)}()):g&&g(b)}function lr(e,t){var i=t?"visible":"hidden";document.getElementById(e).style.visibility=i}function ur(e,t,i){var n=document.createElement("param");n.setAttribute("name",t),n.setAttribute("value",i),e.appendChild(n)}var cr=function(e){function i(e){var t;return a(this,i),(t=h(this,c(i).call(this))).options=e||{},t.gap=+t.options.gap||1e3,t.isRaf=!!t.options.isRaf,t.task=null,t.dotTime=(new Date).getTime(),t}return u(i,Me),s(i,[{key:"start",value:function(){this.trigger("start",{options:this.options}),this.stop(),this._startTimer()}},{key:"tick",value:function(){var e=this._passedTime();this.task&&(this._clearTimer(),0<e&&this.trigger("tick",{options:this.options,duration:e,isStop:!1}),this._startTimer())}},{key:"stop",value:function(){var e=this._passedTime();this.task&&(this._clearTimer(),0<e&&this.trigger("tick",{options:this.options,duration:e,isStop:!0}),this.trigger("stop",{options:this.options}))}},{key:"_internalF",value:function(){var e=this._passedTime();0<e&&this.trigger("tick",{options:this.options,duration:e,isStop:!1}),this._startTimer()}},{key:"_clearTimer",value:function(){this.isRaf?de(this.task):clearTimeout(this.task),this.task=null}},{key:"_startTimer",value:function(){var e=this;this.isRaf?this.task=ce(function(){return e._internalF()}):this.task=setTimeout(function(){return e._internalF()},this.gap)}},{key:"_passedTime",value:function(){var e=(new Date).getTime(),t=e-this.dotTime;return this.dotTime=e,t}}]),i}();function dr(){var e=0<arguments.length&&arguments[0]!==undefined?arguments[0]:"muduPlayer";if(!(this instanceof dr))return new dr(e);this.storeKey=e}dr.prototype.get=function(e){return this._getData()[e]},dr.prototype.set=function(e,t){var i=this._getData();i[e]=t,this._setData(i)},dr.prototype._getData=function(){var e={};try{e=localStorage.getItem(this.storeKey),e=JSON.parse(e)}catch(t){e={},console.error("muduplayer: cannot read localstorage")}return e||{}},dr.prototype._setData=function(e){try{localStorage.setItem(this.storeKey,_e(e))}catch(st){console.error("muduplayer: cannot set localstorage")}};var hr=new(function(e){function t(){return a(this,t),h(this,c(t).apply(this,arguments))}return u(t,Me),s(t,[{key:"onError",value:function(){this.trigger.apply(this,["onError"].concat(Array.prototype.slice.call(arguments)))}},{key:"onEvent",value:function(){this.trigger.apply(this,["onEvent"].concat(Array.prototype.slice.call(arguments)))}},{key:"onReady",value:function(){this.trigger.apply(this,["onReady"].concat(Array.prototype.slice.call(arguments)))}}]),t}()),pr=function(e){function r(e,t){var i;return a(this,r),(i=h(this,c(r).call(this,e,g({},r.defaultOptions,t)))).object=null,i._prevPos=null,i.flashUtilListener=[],i._commandQueue=[],i.currentTimer=null,i.commandQueueTimer=null,i.lastVolume=dr().get("volume"),window.muduPlayer=window.muduPlayer||{},window.muduPlayer.flashUtil=window.muduPlayer.flashUtil||hr,i.renderCustomTip(),i.initCommandQueueTimer(),i.removed=!1,i}return u(r,tr),s(r,[{key:"loadFiles",value:function(){return this.removed?Promise.reject(new TypeError("flash provider removed")):p(c(r.prototype),"loadFiles",this).call(this)}},{key:"getMediaElement",value:function(){return this.player.dom.videoWrap.querySelector("object")}},{key:"createMediaElement",value:function(){var t=this;this.id=this.player._config.containerId+"-flash",this.player.dom.flash.id=this.id;var e={autoplay:!1,preload:this.player._config.preload,hls_seekmode:"ACCURATE",debug:!1,connectTimeout:this.option.connectTimeout||3},i={id:this.id,name:this.id,"class":ht,style:"position: absolute; display: block; left: 0; right: 0; top: 0; bottom: 0; pointer-events:auto;"};return sr(this.player._config.fileCdnPath+"/mudu-player.swf",this.id,"100%","100%","10.3",0,e,{wmode:"opaque",allowScriptAccess:"always",bgcolor:"#000000"},i,function(e){!1===e.success&&fe(t.player.dom.container).add(Oi)}),this.getMediaElement()}},{key:"remove",value:function(){p(c(r.prototype),"remove",this).call(this),this.removed=!0,this.currentTimer&&this.currentTimer.stop(),this.commandQueueTimer&&this.commandQueueTimer.stop(),this.flashUtilListener.forEach(function(e){return hr.off(e.event,e.id)}),this.triggerFlash("mudu_stop"),this.object=null}},{key:"setup",value:function(e){var o=this,n=e.type,a=e.absoluteFile,s=e.isLive;if(!this.removed){var l=function l(){o.player._status.flashReady=!0,o.object=o.getMediaElement(),o.id=o.player._config.containerId+"-flash";var e="",t=(new Date).getTime();if(e=0<=a.indexOf("?")?"&safari".concat(t,"=").concat(t):"?safari".concat(t,"=").concat(t),"rtmp"===n){var i=function r(e){var t={connection:"",stream:""};if(!e)return t;var i,n=e.search(/&(?!\w+=)/);return-1!==n?i=n:0===(n=i=e.lastIndexOf("/"))&&(n=i=e.length),t.connection=e.substring(0,n),t.stream=e.substring(i+1,e.length),t}(a);o.triggerFlash("mudu_setProperty","rtmpConnection",i.connection),o.triggerFlash("mudu_setProperty","rtmpStream",i.stream)}else"auto"===o.player._config.preload?R()&&s?o.triggerFlash("mudu_src",a+e):o.triggerFlash("mudu_src",a):o.oncePlayer("beforePlay",function(){R()&&s?o.triggerFlash("mudu_src",a+e):o.triggerFlash("mudu_src",a)});o._subEvents(),o._updateCurrentTime()};return this.player._status.flashReady?(l(),Promise.resolve()):new Promise(function(t,e){var i=!1,n=hr.on("onReady",function(e){e===o.id&&null===o.object&&(i=!0,l(),t())});o.flashUtilListener.push({event:"onReady",id:n}),b()&&setTimeout(function(){i||(fe(o.player.dom.container).add(Oi),e(new Error(r.Error.NotAllowedError)))},5e3)})}}},{key:"initCommandQueueTimer",value:function(){var i=this;this.commandQueueTimer=new cr({gap:200}),this.commandQueueTimer.on("tick",function(e){e.isStop||(0===i._commandQueue.length?i.commandQueueTimer.stop():i._apiAvailable()&&(i._commandQueue.forEach(function(e){var t;i.object[e.fn]&&(t=i.object)[e.fn].apply(t,m(e.args))}),i._commandQueue=[]))})}},{key:"renderCustomTip",value:function(){var e=this.option.renderTip(),t=this.player.dom.flashTip,i=function i(){t.innerHTML=""};"string"==typeof e&&(i(),t.innerHTML=e),"object"===w(e)&&(i(),t.appendChild(e))}},{key:"triggerFlash",value:function(e){for(var t=arguments.length,i=new Array(1<t?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];var r;if(this.object&&this.object[e])return(r=this.object)[e].apply(r,i);this._commandQueue.push({fn:e,args:i}),this.commandQueueTimer.start()}},{key:"_subEvents",value:function(){var r=this,e=hr.on("onEvent",function(e,t){if(e===r.id&&null!==r.object)switch(r.trigger(t),t){case"playing":r.trigger("play");break;case"durationchange":r.trigger("duration");break;case"volumechange":var i=r.getVolume();r.trigger("volume",{type:"volume",volume:i})}}),t=hr.on("onError",function(e){for(var t=arguments.length,i=new Array(1<t?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];e===r.id&&null!==r.object&&r.trigger(Bn,{message:i.join(),data:i,fatal:!0})});this.flashUtilListener.push({event:"onEvent",id:e}),this.flashUtilListener.push({event:"onError",id2:t})}},{key:"_updateCurrentTime",value:function(){var t=this;this.currentTimer=new cr({gap:500,name:"flash update time"}),this.currentTimer.on("tick",function(){if(t.object){var e=t.getPosition();e!==t._prevPos&&t.trigger("timeupdate"),t._prevPos=e}}),this.currentTimer.start()}},{key:"getWidth",value:function(){return this._get("videoWidth",-1)}},{key:"getHeight",value:function(){return this._get("videoHeight",-1)}},{key:"getMetrics",value:function(){return this._apiAvailable()?{videoHeight:this.getHeight(),videoWidth:this.getWidth(),fps:this.getFPS(),bps:this.getBPS()}:{}}},{key:"getFPS",value:function(){return this._get("currentFPS",-1)}},{key:"getBPS",value:function(){return this._get("currentBPS",-1)}},{key:"getBuffer",value:function(){if(this._apiAvailable()){var e=this._get("buffered",[]);if(1<=e.length)return e.map(function(e){return{start:e[0],end:e[1]}})}return[]}},{key:"getVolume",value:function(){return this._apiAvailable()?this._get("volume"):1}},{key:"setVolume",value:function(e){if(this.object){var t=this.getMute();ie("number",e)&&(e<0&&(e=0),1<e&&(e=1),this.triggerFlash("mudu_setProperty","volume",e),t&&0<e&&this.setMute(!1),t||0!==e||this.setMute(!0))}}},{key:"setMute",value:function(){var e=!(0<arguments.length&&arguments[0]!==undefined)||arguments[0];this._apiAvailable()&&(e||0!==this.getVolume()||this.setVolume(.5),this.object.mudu_setProperty("muted",!!e),this.trigger("mute",{type:"mute",mute:!!e}))}},{key:"getMute",value:function(){return!!this._apiAvailable()&&this._get("muted")}},{key:"setStretching",value:function(e){if(this._apiAvailable())switch(e){case"none":case"contain":case"fill":case"cover":case"scale-down":this.object.mudu_setProperty("stretching",e);break;default:this.object.mudu_setProperty("stretching","contain")}}},{key:"getStretching",value:function(){return this._apiAvailable()?this._get("stretching"):"contain"}},{key:"getPosition",value:function(){if(this._apiAvailable())return this._get("currentTime")||0}},{key:"getDuration",value:function(){if(this._apiAvailable())return this._get("duration")}},{key:"setStretch",value:function(){}},{key:"getMetadata",value:function(){}},{key:"play",value:function(){this.object&&(this._get?this._get("ended")?(this.object.mudu_play(),this.seek(0)):this.object.mudu_play():this.triggerFlash("mudu_play"));return Promise.resolve()}},{key:"pause",value:function(){return this.object&&this.triggerFlash("mudu_pause"),Promise.resolve()}},{key:"seek",value:function(e){if(this._apiAvailable()){var t=this._get("currentTime");this.object.mudu_setProperty("currentTime",e),this.trigger("seek",{type:"seek",position:t,offset:e})}}},{key:"getPlaybackRate",value:function(){return 1}},{key:"setPlaybackRate",value:function(){}},{key:"_apiAvailable",value:function(){return this.object&&this.object.mudu_getProperty}},{key:"_get",value:function(e,t){try{return this.object.mudu_getProperty(e)}catch(i){if(ie("undefined",t))throw i;return t}}}]),r}();function fr(){var t=this;try{vr.call(this)}catch(f){console.error("destroy provider",f)}var e=De.call(this),i=e.file,n=e.type,r=e.mineType,o=e.isLive,a=e.absoluteFile,s=e.image,l=e.alwaysDisplayImage,u=e.isTimeShift,c=e.reloadAfterPausing,d=e.reloadAfterPausingTime,h=e.isHideProgress,p=Xe({type:n,mineType:r,url:i,isLive:o,isTimeShift:u},this._config.providerOrder);if(!p){var f="File type not supported";return this.trigger(Ln,{message:f,fatal:!0,errorId:ge()}),Promise.reject(new TypeError(f))}var v=new p.Provider(this,this._config.provider[p.name]);this._provider=g({},p,{instance:v});var m=this;return v.loadFiles().then(function(){if(!v.removed&&!v.getMediaElement()){var e=v.createMediaElement();if(!e)throw new Error(pr.Error.NotAllowedError);m.dom.videoWrap.insertBefore(e,m.dom.background)}}).then(function(){if(!v.removed)return v.setup({isLive:o,file:i,image:s,absoluteFile:a,type:n,mineType:r})}).then(function(){t.trigger(cn,{isLive:o,file:i,absoluteFile:a,type:n,mineType:r,image:s,alwaysDisplayImage:l,isTimeShift:u,reloadAfterPausing:c,reloadAfterPausingTime:d,isHideProgress:h})})["catch"](function(e){throw console.error("provider setup 错误",e),t.trigger(Ln,{error:e,message:e.message,column:e.columnNumber,fileName:e.fileName,lineNumber:e.lineNumber,name:e.name,stack:e.stack,errorId:ge()}),e})}function vr(){var e=this._provider&&this._provider.instance;e&&(this._provider=null,e.remove(),this.trigger(dn))}function mr(){var r=this;try{(function n(){var i=this;var e=Object.values(this._extraProviders);0<e.length&&e.forEach(function(e,t){e.instance&&(e.instance.remove(),e.removed=!0,delete i._extraProviders[e.name])})}).call(this)}catch(d){console.error("destroy extra provider",d)}var e=De.call(this),o=e.file,a=e.type,s=e.mineType,l=e.isLive,u=e.absoluteFile,c=e.image,t=e.isTimeShift,i=Ge({type:a,mineType:s,url:o,isLive:l,isTimeShift:t},this._config);Promise.all(i.map(function(e){if(!e){var t="".concat(e.name," cannot support file type");r.trigger(Ln,{message:t,fatal:!0,errorId:ge()}),Promise.reject(new TypeError(t))}if(r._config.extraProvider[e.name].use){var i=new e.Provider(r,r._config.extraProvider[e.name]);r._extraProviders[e.name]=g({},e,{instance:i});var n=r;return i.loadFiles().then(function(){if(!i.getMediaElement()){var e=i.createMediaElement();if(!e)throw new Error(pr.Error.NotAllowedError);n.dom.videoWrap.insertBefore(e,n.dom.background)}}).then(function(){return i.setup({isLive:l,file:o,image:c,absoluteFile:u,type:a,mineType:s})}).then(function(){})["catch"](function(e){throw console.error("extra provider setup 错误",e),r.trigger(Ln,{error:e,message:e.message,column:e.columnNumber,fileName:e.fileName,lineNumber:e.lineNumber,name:e.name,stack:e.stack,errorId:ge()}),e})}}))}pr.types=["flv","rtmp","hls","m3u8","mp4"],pr.canPlay=function(e){var t=e.type;return 0<=pr.types.indexOf(t)},pr.canPlayMineType=re,pr.isSupported=function(){return!O()},pr.isPlaybackRateSupported=function(){return!1},pr.isFlash=function(e){return!0},pr.isHTML5=function(e){return!1},pr.version="5.0.2-15",pr.defaultOptions={renderTip:re},pr.Error={NotAllowedError:"Media element cannot be created, probably flash is not allowed"};var yr=function(e){function i(e){var t;return a(this,i),Wn((t=h(this,c(i).call(this,e))).player,d(d(t))).method("play").method("pause").method("toggle").method("getState").method("getPlaybackRate").method("setPlaybackRate"),t.subEvents(),t.setPlayBtnIcon(it),t.initPlayButton(),t._lastPausedTimeStamp=0,t}return u(i,zn),s(i,[{key:"changeStateClass",value:function(){var e=this.getState();fe(this.player.dom.container).remove(Ui),fe(this.player.dom.container).add("mudu-state-".concat(e))}},{key:"subEvents",value:function(){var t=this;this.onPlayer(cn,function(){t.subProvider(),fe(t.player.dom.container).add("mudu-state-idle")}),this.onPlayer("internal_plugin_init",function(){fe(t.player.dom.container).remove(Ui)}),this.onPlayer(dn,function(){t.player.timer.loading.stop(),fe(t.player.dom.container).remove(Ui),fe(t.player.dom.container).remove(Xi),t._triggerStateEvt(Sn,"idle"),t.setPlayBtnIcon(it),t.changeStateClass()}),this.onPlayer("internal_buffer",function(e){if(e){if(t._isErrorState())return;t._triggerStateEvt("buffer","buffering"),t.changeStateClass()}else t._triggerStateEvt("play","playing"),t.changeStateClass()}),this.onPlayer(pn,this._onInternalKeyDown.bind(this))}},{key:"subProvider",value:function(){var t=this;this.onProvider("play",function(){t.player.timer.loading.start();var e=t.getState();"playing"!==t.getState()&&(t._triggerStateEvt(mn,"playing"),t.setPlayBtnIcon(nt),"buffering"!==e&&"playing"!==e&&t.player.model.bezel["switch"](it),t.changeStateClass())}),this.onProvider(Hn,function(){t._lastPausedTimeStamp=Date.now(),t.player.timer.loading.stop(),t._triggerStateEvt(Hn,"paused"),t.setPlayBtnIcon(it),t.player.model.bezel["switch"](nt),!t._isErrorState()&&t.changeStateClass()}),this.onProvider("ended",function(){t.player.timer.loading.stop(),t._triggerStateEvt(Sn),t.changeStateClass()}),this.onProvider("seeked",function(){t.player.trigger("seeked")}),this.onProvider("seek",function(e){t.player.trigger("seek",e)}),this.onProvider("stageclick",function(){$n.isAnyClassShow("mudu-popup")?$n.hideAll():t.player.getControls()&&t.player.toggle()})}},{key:"_triggerStateEvt",value:function(e,t){t=t||e;var i=this.player._status.state;this.player._status.state=t,this.player.trigger(e,{type:e,oldState:i,newState:t})}},{key:"_isErrorState",value:function(){return fe(this.player.dom.container).contains(Bi)}},{key:"initPlayButton",value:function(){var t=this;this.onDom(this.player.dom.leftPlayBtn,"click",function(){t.player.toggle()}),this.onDom(this.player.dom.bigPlayBtn,"click",function(){t.player.toggle()}),O()||this.onDom(this.player.dom.videoWrap,"click",function(e){t.player._provider&&t.player._provider.flash||!$n.isAnyClassShow("mudu-popup")&&t.player.getControls()&&t.player.toggle()})}},{key:"setPlayBtnIcon",value:function(e){var t=this.player.dom.leftPlayBtn;fe(t).remove(lt),fe(t).add(e)}},{key:"toggle",value:function(){De.call(this.player);var e=this.player._status.state;return"paused"===e||"idle"===e?this.play():this.pause()}},{key:"play",value:function(){var t=this,e=this.player._status.state,i=De.call(this.player),n=i.reloadAfterPausing,r=i.reloadAfterPausingTime;if(n&&this._lastPausedTimeStamp&&"paused"===e){var o=Date.now();if(r=ie("undefined",r)?3e3:r,o-this._lastPausedTimeStamp>r)return void this.player.replay()}return this.provider()?(this.player.trigger(En,{type:En}),this.provider().play()):fr.call(this.player).then(function(){mr.call(t.player);try{t.play()}catch(e){console.warn(e)}})}},{key:"pause",value:function(){return this.provider()?this.provider().pause():Promise.resolve()}},{key:"getPlaybackRate",value:function(){return this.provider()?this.provider().getPlaybackRate():1}},{key:"setPlaybackRate",value:function(e){if(this.provider())return this.provider().setPlaybackRate(e)}},{key:"getState",value:function(){return this.player._status.state}},{key:"_onInternalKeyDown",value:function(e){32===e&&this.toggle()}}]),i}(),gr={nameMap:{dragStart:O()?"touchstart":"mousedown",dragMove:O()?"touchmove":"mousemove",dragEnd:O()?"touchend":"mouseup"}},kr=function(e){function i(e){var t;return a(this,i),(t=h(this,c(i).call(this,e))).player.dom.ptime.innerHTML="00:00",t.prevDragX=null,t._latest10tsLength=[],t._lastDuration=0,t.onPlayer(cn,t._onProviderInited.bind(d(d(t)))),t.onPlayer(dn,t._onProviderRemoved.bind(d(d(t)))),t.onPlayer(pn,t._onInternalKeyDown.bind(d(d(t)))),t.initPlayedBar(),t.initTimeShiftSeek(),Wn(t.player,d(d(t))).method("seek").method("getPosition").method("getDuration").method("getBuffer").method("setProgressVisible").method("getProgressVisible"),t}return u(i,zn),s(i,[{key:"setBarWidth",value:function(e){this.player.dom.playedBar.style.width=ne(e)}},{key:"getBarWidth",value:function(){return parseFloat(this.player.dom.playedBar.style.width)/100}},{key:"getDuration",value:function(){return this.provider()?this.provider().getDuration():1}},{key:"getPosition",value:function(){return this.provider()?this.provider().getPosition():0}},{key:"getBufferPercentage",value:function(){if(!this.provider())return 0;var e=this.getBuffer().pop();return(e&&e.end||0)/this.getDuration()||0}},{key:"getBuffer",value:function(){return this.provider()?this.provider().getBuffer():[]}},{key:"seek",value:function(e){if(this.provider()){this.provider().seek(e);var t=this.getDuration();e=Math.max(e,0),t&&(e=Math.min(e,t)),this.setBarWidth(this.getPlayedBarPercentage(e)),this.player.dom.ptime.innerHTML=le(e)}}},{key:"computeDragDirec",value:function(e){if(null===this.prevDragX)return this.prevDragX=e,"";var t=e>this.prevDragX?"right":"left";return this.prevDragX=e,t}},{key:"initPlayedBar",value:function(){var n=this,r=function r(e){if(n.getProgressVisible()){fe(n.player.dom.container).add("mudu-flag-dragging");var t=(e.clientX||e.changedTouches[0].clientX)-ue(n.player.dom.playedBarWrap);n.player.model.progressPopup.dragMove(t,n.computeDragDirec(t)),n.player.model.progressPopup.show();var i=t/n.player.dom.playedBarWrap.clientWidth;i=Math.max(i,0),i=Math.min(i,1),n.setBarWidth(i),n.player.dom.ptime.innerHTML=le(i*n.getDuration())}},i=function i(e){if(n.prevDragX=null,n.player.model.progressPopup.hide(),n.player.model.progressPopup.dragEnd(),n.player._status.dragging=!1,n.player.model.controls.setAutoHide(),pe(document,gr.nameMap.dragEnd,i),pe(document,gr.nameMap.dragMove,r),n.getProgressVisible()){var t=((e.clientX||e.changedTouches[0].clientX)-ue(n.player.dom.playedBarWrap))/n.player.dom.playedBarWrap.clientWidth;t=Math.max(t,0),t=Math.min(t,1),n.setBarWidth(t),n.seekByPercentage(t)}};he(this.player.dom.playedBarWrap,gr.nameMap.dragStart,function(){n.player._status.dragging=!0,he(document,gr.nameMap.dragMove,r),he(document,gr.nameMap.dragEnd,i)})}},{key:"initTimeShiftSeek",value:function(){var e=this;this.player.dom.liveBadge.addEventListener("click",function(){e.seekTimeShiftLive()})}},{key:"_onProviderInited",value:function(e){var t=e.isLive,i=e.isTimeShift,n=e.isHideProgress;this.onProvider("bufferchange",this._onBufferChange.bind(this)),this.onProvider(Dn,this._onDuration.bind(this)),this.onProvider(An,this._onTimeUpdate.bind(this)),this.onProvider(An,this._onBufferChange.bind(this)),this.onceProvider("loadeddata",this._onLoadedData.bind(this)),fe(this.player.dom.container).add(Hi),t?(fe(this.player.dom.container).add(Ri),fe(this.player.dom.container).remove(Fi)):(fe(this.player.dom.container).remove(Ri),fe(this.player.dom.container).add(Fi)),i?fe(this.player.dom.container).add(Wi):(fe(this.player.dom.container).remove(Wi),fe(this.player.dom.container).remove(Ni)),this.setProgressVisible(!n),this._latest10tsLength=[]}},{key:"_onProviderRemoved",value:function(){fe(this.player.dom.container).add(Hi)}},{key:"_onBufferChange",value:function(){var e=this.player.dom.loadedBar,t=this.getBufferPercentage()*this.getDuration(),i=this.getPlayedBarPercentage(t);e.style.width=ne(i)}},{key:"_onDuration",value:function(){var e=this.player.dom.dtime,t=this.getDuration()||0;Pe(t)&&0<t&&(e.innerHTML=le(t),this.player.trigger(Pn,{type:Pn,duration:t}),fe(this.player.dom.container).remove(Hi),fe(this.player.dom.container).add("mudu-duration-valid"));var i=t-this._lastDuration;if(0!==this._lastDuration&&1<=i){var n=this._latest10tsLength;n.unshift(i),10<n.length&&n.pop()}this._lastDuration=t,this._updateTimeShiftLiveBadge()}},{key:"_onTimeUpdate",value:function(){var e=this.player.dom,t=(e.playedBar,e.ptime),i=this.getPosition();this.player._status.dragging||(this.setBarWidth(this.getPlayedBarPercentage(i)),t.innerHTML=le(this.getPosition())),this.player.trigger(Tn,{type:Tn,position:i}),this._updateTimeShiftLiveBadge()}},{key:"_onLoadedData",value:function(){var e=this,t=this.getDuration();Pe(t)&&0<t?this.player.trigger(xn):this.onceProvider(Dn,function(){e.player.trigger(xn)})}},{key:"_onInternalKeyDown",value:function(e){var t=this._isLive(),i=!this.getProgressVisible();if(!t&&!i)switch(e){case 37:this.seek(this.getPosition()-5);break;case 39:this.seek(this.getPosition()+5)}}},{key:"_isLive",value:function(){return fe(this.player.dom.container).contains(Ri)}},{key:"_updateTimeShiftLiveBadge",value:function(){var e=this.isTimeShiftLive(),t=this.player.dom.container;e?fe(t).add(Ni):fe(t).remove(Ni)}},{key:"seekTimeShiftLive",value:function(){if(this.isTimeShift()){var e=this.getDuration(),t=this._latest10tsLength;if(t.length<3){var i=e-20;0<i&&this.seek(i)}else{var n=e-t[0]-t[1];this.seek(n)}}}},{key:"getPositionByPercentage",value:function(e){var t=this.getDuration();return this.isTimeShift()?(this.getTimeShiftGap()-t)*(1-e):t?e*t:0}},{key:"seekByPercentage",value:function(e){var t,i=this.getDuration();this.isTimeShift()?t=(i-this.getTimeShiftGap())*e:t=e*i;this.seek(t)}},{key:"isTimeShiftLive",value:function(){var e=this.getDuration(),t=this.getPosition(),i=this._latest10tsLength;return i.length<3?e-t<30:e-t<i[0]+i[1]+i[2]}},{key:"isTimeShift",value:function(){var e=this.getDuration(),t=Pe(e)&&0<e,i=fe(this.player.dom.container).contains(Wi);return t&&i}},{key:"getTimeShiftGap",value:function(){var e=this._latest10tsLength,t=this.getDuration(),i=this.getPosition();if(e.length<3){var n=t-i;return n<30?30-n:30}return e[0]+e[1]+e[2]}},{key:"getPlayedBarPercentage",value:function(e){var t=this.getDuration();if(this.isTimeShift()){var i=e/(t-this.getTimeShiftGap());return 1<i?1:i}return e/t}},{key:"setProgressVisible",value:function(e){e?fe(this.player.dom.container).remove(Vi):(fe(this.player.dom.container).add(Vi),this.player._status.dragging=!1);var t=this.player._config.playlist;if(t&&0<t.length)for(var i=0;i<t.length;i++)t[i].isHideProgress=!e}},{key:"getProgressVisible",value:function(){return!this._isLive()&&!fe(this.player.dom.container).contains(Vi)}}]),i}(),br=function(e){function i(e){var t;return a(this,i),(t=h(this,c(i).call(this,e))).autoHideTimer=null,t._controlsVisible=!!e._config.controls,t._videoLayerControl=!!e._config.videoLayerControl,Wn(t.player,d(d(t))).method("setControls").method("getControls").method("setVideoLayerControl").method("getVideoLayerControl"),t.setControls(!!e._config.controls),t.setVideoLayerControl(!!e._config.videoLayerControl),t.setMobileToggle(),t.setPcToggle(),t}return u(i,zn),s(i,[{key:"setPcToggle",value:function(){var e=this;if(!O()){var i=function i(){e.show(),e.setAutoHide()},n=function n(e){var t=e.oldState;"buffering"!==t&&"playing"!==t&&i()};this.onDom(this.player.dom.container,"mousemove",i),this.onDom(this.player.dom.container,"click",i),this.onPlayer(mn,n),this.onPlayer("pause",i)}}},{key:"setMobileToggle",value:function(){var t=this;if(O()){var i=function i(e){e.stopPropagation(),t.toggle()};this.onDom(this.player.dom.videoWrap,"click",i),this.onPlayer(mn,function(){t.setAutoHide()})}}},{key:"setAutoHide",value:function(){var e=this;clearTimeout(this.autoHideTimer),this.autoHideTimer=setTimeout(function(){$n.isAnyClassShow("mudu-popup")||e.player._status.dragging||e.hide()},3e3)}},{key:"show",value:function(){fe(this.player.dom.container).remove(Di),this._triggerControlsVisible(this.getControls())}},{key:"hide",value:function(){var e=this.player.model.video.getState();"paused"!==e&&"idle"!==e&&(fe(this.player.dom.container).add(Di),this._triggerControlsVisible(!1))}},{key:"isShow",value:function(){return!fe(this.player.dom.container).contains(Di)}},{key:"_triggerControlsVisible",value:function(e){e!==this._controlsVisible&&(this._controlsVisible=e,this.player.trigger(kn,{type:kn,visible:this._controlsVisible}))}},{key:"toggle",value:function(){this.isShow()?this.hide():this.show(),this.setAutoHide()}},{key:"setVideoLayerControl",value:function(){var e=!(0<arguments.length&&arguments[0]!==undefined)||arguments[0];if(!O()){this._videoLayerControl=!!e;var t=this._videoLayerControl?"none":"block";this.player.dom.baseLayer.style.display=t,this.player.trigger(yn,{type:yn,videoLayerControl:this._videoLayerControl})}}},{key:"setControls",value:function(){var e=!(0<arguments.length&&arguments[0]!==undefined)||arguments[0];this._showControls=!!e;var t=this._showControls?"block":"none";this.player.dom.controllerWrap.style.display=t,this.player.trigger(gn,{type:gn,controls:this._showControls}),this._triggerControlsVisible(this._showControls&&this.isShow())}},{key:"getControls",value:function(){return this._showControls}},{key:"getVideoLayerControl",value:function(){return this._videoLayerControl}},{key:"remove",value:function(){p(c(i.prototype),"remove",this).call(this),clearTimeout(this.autoHideTimer)}}]),i}(),_r=function(e){function i(e){var t;return a(this,i),Wn((t=h(this,c(i).call(this,e))).player,d(d(t))).method("getMute").method("setMute").method("getVolume").method("setVolume"),t.initVolumeButton(),t.subEvents(),t.volumeTip=$n(t.player.dom.volumeButton,{content:"",container:t.player.dom.container}),O()&&(t.player.dom.volumeWrap.style.display="none"),t}return u(i,zn),s(i,[{key:"subEvents",value:function(){var i=this;this.onPlayer(cn,function(){i.subProviderEvents();var e=dr().get("volume")||1,t=dr().get("mute")||!1;O()?i.setVolume(1):(i.setVolume(e),i.setMute(t))}),this.onPlayer(pn,this._onInternalKeyDown.bind(this))}},{key:"updateTipText",value:function(){var e=be(this.getMute()?this.lang.Unmute:this.lang.Mute);this.volumeTip.updateContent(e)}},{key:"subProviderEvents",value:function(){var t=this;this.onProvider("mute",function(e){t.player.trigger("mute",e),t.switchVolumeIcon(),t.setBarWidth(ne(t.getVolume())),t.cacheVolume(),t.updateTipText()}),this.onProvider("volume",function(e){t.player.trigger("volume",e),t.switchVolumeIcon(),t.setBarWidth(ne(t.getVolume())),t.cacheVolume()})}},{key:"cacheVolume",value:function(){dr().set("volume",this.getVolume()),dr().set("mute",this.getMute())}},{key:"initVolumeButton",value:function(){var r=this;this.setBarWidth("100%"),this.switchVolumeIcon();var o=function o(e){var t=e||window.event,i=45*(r.player._status.containerFontSize/16),n=((t.clientX||t.changedTouches[0].clientX)-ue(r.player.dom.volumeBarWrap))/i;r.setVolume(n)},e=function e(){pe(document,gr.nameMap.dragEnd,e),pe(document,gr.nameMap.dragMove,o)};he(this.player.dom.volumeBarWrapWrap,"click",function(e){var t=45*(r.player._status.containerFontSize/16),i=e||window.event,n=((i.clientX||i.changedTouches[0].clientX)-ue(r.player.dom.volumeBarWrap))/t;r.player.setVolume(n)}),he(this.player.dom.volumeBarWrapWrap,gr.nameMap.dragStart,function(){he(document,gr.nameMap.dragMove,o),he(document,gr.nameMap.dragEnd,e)}),he(this.player.dom.volumeButton,"click",function(){r.setMute(!r.getMute()),ce(function(){r.updateTipText(),r.volumeTip.show()})})}},{key:"getMute",value:function(){return!!this.provider()&&this.provider().getMute()}},{key:"setMute",value:function(){var e=!(0<arguments.length&&arguments[0]!==undefined)||arguments[0];if(this.provider())return e||0!==this.getVolume()||this.setVolume(.5),this.provider().setMute(e)}},{key:"getVolume",value:function(){return this.provider()?this.provider().getVolume():1}},{key:"setVolume",value:function(e){this.provider()&&this.provider().setVolume(e)}},{key:"setBarWidth",value:function(e){this.player.dom.volumeBar.style.width=e}},{key:"switchVolumeIcon",value:function(e){var t=this.player.dom.volumeButton;fe(t).remove(lt),e?fe(t).add(e):.95<=this.getVolume()?fe(t).add("mudu-icon-volume-up"):0<this.getVolume()?fe(t).add("mudu-icon-volume-down"):fe(t).add("mudu-icon-volume-off")}},{key:"_onInternalKeyDown",value:function(e){switch(e){case 38:this.setVolume(this.getVolume()+.1);break;case 40:this.setVolume(this.getVolume()-.1)}}}]),i}(),wr=function(e){function i(e){var t;return a(this,i),Wn((t=h(this,c(i).call(this,e))).player,d(d(t))).method("getPlaylist").method("getPlaylistItem").method("getPlaylistIndex").method("load").method("reload").method("next").method("prev").method("replay").method("setQuality").method("switchQuality").method("switchListItem").method("setRepeat").method("getRepeat"),t._subEvent(),t._retryStartTime=new Date,t._retryTimes=0,t._retryTimer=null,e._config.enableErrorRetry&&(t.onPlayer("delegate-model",t._onDelegateModel.bind(d(d(t)))),t.onPlayer(Ln,t._onOuterError.bind(d(d(t))))),t}return u(i,zn),s(i,[{key:"_onDelegateModel",value:function(e){switch(e.fn){case"load":case"reload":case"next":case"prev":case"replay":case"setQuality":case"switchQuality":case"switchListItem":this._retryStartTime=new Date,this._retryTimes=0,clearTimeout(this._retryTimer)}}},{key:"_onOuterError",value:function(e){var t=this,i=e.fatal,n=this.player._config,r=n.errorMaxRetry,o=n.errorMaxRetryTimeout,a=n.errorRetryDelay,s=new Date;i&&(r>this._retryTimes||s.getTime()<this._retryStartTime.getTime()+o)&&(clearTimeout(this._retryTimer),this._retryTimer=setTimeout(function(){t.m_removed||(t._retryTimes++,t.replay())},a))}},{key:"_subEvent",value:function(){var i=this,n=this.player;this.onPlayer(cn,function(){if(n._provider){var e=n._provider.html5,t=n.dom.container;fe(t).remove(Xi),fe(t).add("mudu-provider-ready"),e?fe(t).add("mudu-provider-html5"):fe(t).add("mudu-provider-flash"),i.onProvider("ended",function(){n.trigger("complete"),i.getPlaylistIndex()===i.getPlaylist().length-1?n._config.repeat?i.reload():n.trigger("playlistComplete"):i.next()})}})}},{key:"load",value:function(e){var t=!(1<arguments.length&&arguments[1]!==undefined)||arguments[1],i=Je(e);return i?(this.player._config.playlist=i,this.player.trigger(_n,{type:_n,playlist:i}),this.reload(t)):Promise.reject(new Error("muduPlayer().load(`playlist`): the format of `playlist` is illegel"))}},{key:"reload",value:function(){var t=this,i=!(0<arguments.length&&arguments[0]!==undefined)||arguments[0];return He.call(this.player),fr.call(this.player).then(function(){mr.call(t.player);try{if(i)return t.player.play()}catch(e){console.warn(e)}})}},{key:"replay",value:function(){var t=this;return fr.call(this.player).then(function(){mr.call(t.player);try{return t.player.play()}catch(e){console.warn(e)}})}},{key:"switchListItem",value:function(e,t){var i=this;if(!ie("number",e))return Promise.resolve(!1);var n=this.player._config.playlist[e];return n?ie("number",t)&!n.sources[t]?Promise.resolve(!1):(ie("number",t)?Be.call(this.player,e,t):He.call(this.player,e),this.player.trigger(wn,{type:wn,index:e,item:this.getPlaylistItem(e)}),fr.call(this.player).then(function(){return i.player.play()}).then(function(){return!0})):Promise.resolve(!1)}},{key:"next",value:function(){var e=this.getPlaylistIndex()+1;return this.switchListItem(e)}},{key:"prev",value:function(){var e=this.getPlaylistIndex()-1;return this.switchListItem(e)}},{key:"getPlaylist",value:function(){return this.player._config.playlist}},{key:"getPlaylistItem",value:function(){var e=0<arguments.length&&arguments[0]!==undefined?arguments[0]:0;return this.player._config.playlist[e]}},{key:"getPlaylistIndex",value:function(){for(var e=0;e<this.player._config.playlist.length;e++){if(this.player._config.playlist[e].active)return e}return-1}},{key:"setQualityActive",value:function(e){var t=this.getPlaylistIndex();return Be.call(this.player,t,e)}},{key:"getQuality",value:function(e){for(var t=this.getPlaylistIndex(),i=this.player._config.playlist,n=0;n<i[t].sources.length;n++)if(e===n)return i[t].sources[n]}},{key:"setQuality",value:function(e){return console.warn("player.setQuality will be removed after v1.0.0, please use player.switchQuality instead"),this.switchQuality(e)}},{key:"switchQuality",value:function(e){var t=this.getQuality(e);return t?(this.setQualityActive(e),this.player.trigger("switchQuality",{index:e,item:t}),this.replay()):Promise.resolve()}},{key:"setRepeat",value:function(e){this.player._config.repeat=!!e}},{key:"getRepeat",value:function(){return this.player._config.repeat}},{key:"remove",value:function(){p(c(i.prototype),"remove",this).call(this),clearTimeout(this._retryTimer)}}]),i}(),Tr=b()?"keyup":"keydown",Pr=function(e){function i(e){var t;return a(this,i),(t=h(this,c(i).call(this,e))).subEvent(),t}return u(i,zn),s(i,[{key:"subEvent",value:function(){var o=this.player;this.onKeyUp=function(e){if(o._status.focus){var t=document.activeElement,i=t.tagName.toUpperCase(),n=t.getAttribute("contenteditable");if("INPUT"!==i&&"TEXTAREA"!==i&&""!==n&&"true"!==n){var r=e||window.event;switch(r.keyCode){case 32:case 37:case 39:case 38:case 40:r.preventDefault(),o.trigger(pn,r.keyCode,r)}}}},he(document,Tr,this.onKeyUp)}},{key:"remove",value:function(){pe(document,Tr,this.onKeyUp)}}]),i}(),Sr=function(e){function i(e){var t;return a(this,i),Wn((t=h(this,c(i).call(this,e))).player,d(d(t))).method("getWidth").method("getHeight").method("resize").method("getRect"),t.setWidth(),t.setHeight(),t.setAspect()||t.setHeight(),t}return u(i,zn),s(i,[{key:"getWidth",value:function(){return this.getRect().width}},{key:"getHeight",value:function(){return this.getRect().height}},{key:"getRect",value:function(){return ke(this.player.dom.container)}},{key:"resize",value:function(e,t){e=this.setWidth(e),t=this.setHeight(t),this.removeAspect(),this.player.trigger("resize",{type:"resize",width:e,height:t})}},{key:"setWidth",value:function(e){var t=e=e||this.player._config.width;return this.player.dom.container.style.width=ne(t),e}},{key:"setHeight",value:function(e){var t=e=e||this.player._config.height;return this.player.dom.container.style.height=ne(t),e}},{key:"setAspect",value:function(){var e=(this.player._config.aspectratio+"").split(":").map(function(e){return+e}).filter(function(e){return!!e&&0<e});if(2===e.length){var t=e[1]/e[0]*100+"%";return this.player.dom.aspect.style.paddingTop=t,fe(this.player.dom.container).add(Ai),this.setHeight("auto"),!0}return fe(this.player.dom.container).add("mudu-normal-mode"),!1}},{key:"removeAspect",value:function(){this.player.dom.aspect.style.paddingTop=0,fe(this.player.dom.container).remove(Ai)}}]),i}(),Er=function(e){function i(e){var t;return a(this,i),(t=h(this,c(i).call(this,e))).onPlayer(cn,t._onProviderInited.bind(d(d(t)))),t}return u(i,zn),s(i,[{key:"_onProviderInited",value:function(){var e=this.player._config.stretching;this.provider()&&this.provider().setStretching(e)}}]),i}(),xr=function(e){function i(e){var t;return a(this,i),(t=h(this,c(i).call(this,e)))._onImgLoad=t._onImgLoad.bind(d(d(t))),t._onStyleLoaded=t._onStyleLoaded.bind(d(d(t))),t.setLogoStyle(),t.oncePlayer(fn,t._onStyleLoaded),t}return u(i,zn),s(i,[{key:"_onStyleLoaded",value:function(){this.setLogoVisible()}},{key:"_onImgLoad",value:function(){var e=this.player.dom,t=e.logoWrap,i=e.logoImg,n=ke(i),r=ke(t),o=r.width/r.height;n.width/n.height<o?i.style.height="100%":i.style.width="100%",i.style.opacity=this.player._config.logo.opacity+""}},{key:"setLogoVisible",value:function(){var e=this.player._config.logo,t=this.player.dom.logoImg;he(t,"load",this._onImgLoad),t.style.display="inline-block",t.src=e.file}},{key:"setLogoStyle",value:function(){var t=this.player._config.logo,e=this.player.dom,i=e.logoWrap,n=e.logoImg,r=e.logoLink;if(t.file){if(this.resetPosition(),i.style.width=ne(t.width),i.style.height=ne(t.height),"control-bar"!==t.position){var o=t.position.split("-");o.forEach(function(e){"top"!==e&&"bottom"!==e||(i.style[e]=ne(t.marginh)),"left"!==e&&"right"!==e||(i.style[e]=ne(t.marginw))}),o.forEach(function(e){n.style[e]="0"})}r.href=t.link?t.link:"javascript:void(0);",r.target=t.link?"_blank":"_self",r.style.cursor=t.link?"pointer":"default"}}},{key:"resetPosition",value:function(){this.player.dom.logoWrap.style.cssText="position: absolute;"}},{key:"remove",value:function(){pe(this.player.dom.logoImg,"load",this._onImgLoad),p(c(i.prototype),"remove",this).call(this)}}]),i}(),Lr=function(e){function i(e){var t;return a(this,i),(t=h(this,c(i).call(this,e))).init(),t}return u(i,zn),s(i,[{key:"init",value:function(){var e=this.player;this.setTrue=function(){e._status.focus=!0},this.setFalse=function(){e._status.focus=!1},he(document,"click",this.setFalse,!0),he(e.dom.container,"click",this.setTrue,!0)}},{key:"remove",value:function(){pe(document,"click",this.setFalse,!0),pe(this.player.dom.container,"click",this.setTrue,!0)}}]),i}(),Mr=function(e){function o(e){var t;a(this,o),Wn((t=h(this,c(o).call(this,e))).player,d(d(t))).method("setLoadingForced");var i=t.player.dom.bezel,n=t.player.dom.bezelWrap,r=t.player._config.renderLoading;return r?(t.renderLoadingString="string"==typeof r?ve(r):r,t.renderLoadingString.className+="".concat(rn," ").concat("mudu-extra-loading-icon")):t.renderLoadingString=ve('<span class="'.concat(rn," ").concat("mudu-loading-icon"," ").concat("mudu-icon-load",'"></span>')),n.append(t.renderLoadingString),t.onDom(i,"animationend",function(){fe(i).remove(si)}),t}return u(o,zn),s(o,[{key:"setLoadingForced",value:function(e){this.renderLoadingString.style.display=e?"block":""}},{key:"switch",value:function(e){var t=this.player.dom.bezel;fe(t).remove(lt),fe(t).add(e),fe(t).add(si)}}]),o}(),Cr=function(e){function i(e){var t;return a(this,i),Wn((t=h(this,c(i).call(this,e))).player,d(d(t))).method("setImageDisplay"),t.subEvents(),t}return u(i,zn),s(i,[{key:"setImageDisplay",value:function(e){var t=this.player.dom.background;switch(e){case"show":t.style.display="block";break;case"hidden":t.style.display="none";break;case"auto":t.style.display=""}}},{key:"subEvents",value:function(){var o=this;this.onPlayer(cn,function(e){var t=e.image,i=e.alwaysDisplayImage,n=o.player.dom.background,r=o.player.dom.container;fe(r).remove(Qi),fe(r).add("mudu-stretch-"+o.player._config.stretching),n.style.backgroundImage=t?"url(".concat(t,")"):"none",i?fe(n).add(gi):fe(n).remove(gi)})}}]),i}(),Rr=function(e){function i(e){var t;return a(this,i),Wn((t=h(this,c(i).call(this,e))).player,d(d(t))).method("appendRightControllerButton"),t}return u(i,zn),s(i,[{key:"appendRightControllerButton",value:function(e){e instanceof window.HTMLElement&&this.player.dom.controllerRightIcons.appendChild(e)}}]),i}(),Fr=function(e){function i(t){var e;return a(this,i),(e=h(this,c(i).call(this,t))).onPlayer(cn,function(){var e=De.call(t).title;e?t.dom.title.innerHTML=e:t.dom.title.style.display="none"}),e}return u(i,zn),i}(),Ar=function(e){function i(e){var t;return a(this,i),(t=h(this,c(i).call(this,e))).dom=null,t.createDom(),t.tip=$n("",{container:e.dom.container,content:t.dom,"class":"mudu-popup",getMaxHeight:function(e){return e.height}}),t._subEvents(),t}return u(i,zn),s(i,[{key:"generateDom",value:function(){this.createDom()}},{key:"_subEvents",value:function(){var i=this;this.handleContextMenu=function(e){if(i.tip.isShow())i.tip.hide();else{var t=i.getStyle(e);t&&($n.hideAll(),i.tip.show(t),e.preventDefault&&e.preventDefault())}},this.onDom(this.player.dom.container,"contextmenu",this.handleContextMenu)}},{key:"getStyle",value:function(e){var t=ke(this.player.dom.container),i=ke(this.player.dom.container.querySelector(".".concat(ni)));if(!(t.width<i.width||t.height<i.height)){var n=e.clientX,r=e.clientY,o=t.height-i.height,a=t.width-i.width,s=n-t.left,l=r-t.top;return{left:s=a<s?a:s,top:l=o<l?o:l}}}},{key:"createDom",value:function(){for(var e=this.player._config.contextMenus,t=e.map(function(e){return'<a class="'.concat(rn," ").concat(bi,'" href="').concat(e.link?e.link:"javascript:void(0)",'" target="_blank" menuKey="').concat(e.key,'" menuText="').concat(e.text,'">')+'<div class="'.concat(rn," ").concat(_i,'">').concat(e.text,"</div>")+"</a>"}),i=ve('<div class="'.concat(rn," ").concat(ni," ").concat("mudu-contextmenu-panel",'">')+'<div class="'.concat(rn," ").concat(wi,'">').concat(t.join(""),"</div>")+"</div>"),n=i.querySelectorAll(".".concat(bi)),r=this,o=0;o<n.length;o++)n[o].onclick=function(){var e=this.getAttribute("menuKey"),t=this.getAttribute("menuText");r.tip.hide(),r.player.trigger(vn,{key:e,text:t,type:vn})};this.dom=i}}]),i}(),Dr=function(e){function i(e){var t;return a(this,i),(t=h(this,c(i).call(this,e))).highlights=[],t.autoHideTimer=null,t.subEvents(),t}return u(i,zn),s(i,[{key:"subEvents",value:function(){var t=this;this.onPlayer(Pn,function(){t.setHightLights()}),this.onPlayer(dn,function(){t.clearHightLights()}),this.onDom(this.player.dom.playedBarWrap,"mousemove",function(e){t.show(),t.handleMouseMove(e),O()&&t.setAutohide()}),O()||(this.onDom(this.player.dom.playedBarWrap,"mouseenter",function(e){t.show()}),this.onDom(this.player.dom.playedBarWrap,"mouseleave",function(e){t.hide()}),this.onDom(this.player.dom.playedBarWrap,"mouseover",function(e){t.handleDotEnter(e)}),this.onDom(this.player.dom.playedBarWrap,"mouseout",function(e){t.handleDotLeave(e)}))}},{key:"setAutohide",value:function(){var e=this;clearTimeout(this.autoHideTimer),this.autoHideTimer=setTimeout(function(){e.hide()},300)}},{key:"handleMouseMove",value:function(e){var t=function n(e){for(var t=0,i=0;t+=e.offsetTop||0,i+=e.offsetLeft||0,e=e.offsetParent;);return{top:t,left:i}}(this.player.dom.playedBarWrap).left,i=(e.clientX||e.chhegdTouches[0].clientX)-t;i<0||i>this.player.dom.playedBarWrap.offsetWidth||this.move(i)}},{key:"handleDotEnter",value:function(e){var t=e.target||e.srcElement;if(t&&fe(t).contains(ii)){var i=t.getAttribute("text");this.setDotActive(t,!0),this.setPopText(i),this.setPopTextVisible(!0),this.handleMouseMove(e)}}},{key:"handleDotLeave",value:function(e){var t=e.target||e.srcElement;t&&fe(t).contains(ii)&&(this.setDotActive(t,!1),this.setPopText(""),this.setPopTextVisible(!1),this.handleMouseMove(e))}},{key:"setPopText",value:function(e){this.player.dom.barTextText.innerHTML=e}},{key:"setPopTextVisible",value:function(e){var t=fe(this.player.dom.barPopup);e?t.add(Nt):t.remove(Nt)}},{key:"isPopTextVisible",value:function(){return fe(this.player.dom.barPopup).contains(Nt)}},{key:"setDotActive",value:function(e,t){var i=fe(e);t?i.add(nn):i.remove(nn)}},{key:"show",value:function(){fe(this.player.dom.barPopup).remove("hidden")}},{key:"hide",value:function(){fe(this.player.dom.barPopup).add("hidden")}},{key:"move",value:function(e){this.player.model.progress.getDuration();var t=this.player.dom.playedBarWrap.offsetWidth;e<0&&(e=0),t<e&&(e=t);var i=e/t,n=le(this.player.model.progress.getPositionByPercentage(i));this.player.dom.barTime.innerHTML=n,this.player.dom.barTextTime.innerHTML=n,this.setPosition(!1,this.isPopTextVisible(),e,t)}},{key:"dragMove",value:function(e,t){var i=this,n=this.getDotFromDrag(e,t),r=this.highlights.indexOf(n),o=this.player.dom.highlight.querySelectorAll(".".concat(ii)),a=o[r];[].slice.call(o).forEach(function(e){return i.setDotActive(e,e===a)}),a?(this.setPopText(n.text),this.setPopTextVisible(!0)):(this.setPopText(""),this.setPopTextVisible(!1)),this.move(e)}},{key:"dragEnd",value:function(){var t=this,e=this.player.dom.highlight.querySelectorAll(".".concat(ii));[].slice.call(e).forEach(function(e){return t.setDotActive(e,!1)})}},{key:"getDotFromDrag",value:function(e,t){var i=this.player.dom.playedBarWrap.offsetWidth,n=this.player.model.progress.getDuration(),r=e/i*n,o=3/i*n,a=this.highlights.filter(function(e){return e.time>r-o&&e.time<r+o});return a.length<=1?a[0]:"left"===t?a[0]:"right"===t?a.pop():a[0]}},{key:"setPosition",value:function(e,t,i,n){var r,o=168*this.player._status.containerFontSize/16,a=-(o-(r=e||t?!e&&t?this.player.dom.barText.offsetWidth:o:this.player.dom.barTime.offsetWidth))/2,s=n-(o/2+r/2),l=i-o/2;l<a&&(l=a),s<l&&(l=s),this.player.dom.barPopup.style.left="".concat(l,"px")}},{key:"setHightLights",value:function(){var e=De.call(this.player).highlights,t=this.player.dom.highlight,i=this.player.model.progress.getDuration();this.highlights=ie("array",e)?e:[],this.highlights=this.highlights.slice().sort(function(e,t){return e.time>=t.time});var n=this.highlights.map(function(e){var t=e.time/i;return'<div class="'.concat(rn," ").concat(ii,'" text="').concat(e.text,'" style="left: ').concat(ne(t),'"></div>')});t.innerHTML=n.join("")}},{key:"clearHightLights",value:function(){this.player.dom.highlight.innerHTML="",this.highlights=[]}}]),i}(),Hr=function(e){function t(e){var n;return a(this,t),(n=h(this,c(t).call(this,e)))._tryDom=n.geneTryDom(),n.renderError=ie("function",n.player._config.renderError)?n.player._config.renderError:n.defaultRenderError.bind(d(d(n))),n.onPlayer(cn,function(){n.onProvider(Bn,function(e){e.message="provider_".concat(n.player._provider.name,"_").concat(e.message),e.errorId=ge(),n.player.trigger(Ln,e)})}),n.onPlayer(Ln,function(e){var t={errorId:e.errorId,message:n.filterErrorMsg(e.message),detail:e.message};if(e.fatal){var i=n.renderError(t);i&&(ie("string",i)||i instanceof HTMLElement)||(i=n.defaultRenderError(t)),ie("string",i)?n.player.dom.errorWrap.innerHTML=i:(n.player.dom.errorWrap.innerHTML="",n.player.dom.errorWrap.appendChild(i)),fe(n.player.dom.container).add(Bi)}}),n}return u(t,zn),s(t,[{key:"geneTryDom",value:function(){var t=this,e='<a href="javascript:void(0)" action="reload" style="color: blue;">'.concat(this.lang.Reload,"</a>"),i=ve("<div>".concat(this.lang["You can try"]," ").concat(e,"</div>"));return i.onclick=function(e){"reload"===((e=e||window.event).target||e.srcElement).getAttribute("action")&&t.player.replay()},i}},{key:"defaultRenderError",value:function(e){var t=e.message,i=(e.detail,e.errorId),n=ve('<div class="'.concat(rn," ").concat(vi,'">')+'<div class="'.concat(rn," ").concat(hi,'"><span class="').concat(rn," ").concat(st,'"></span></div>')+'<div class="'.concat(rn," ").concat(pi,'">')+"<div>".concat(t,"(").concat(i,")</div>")+"</div></div>");return n.querySelector(".".concat(pi)).appendChild(this._tryDom),n}},{key:"filterErrorMsg",value:function(e){if(!e)return this.lang["Unknown Error"];var t=e.toLowerCase(),i=function i(e){return 0<=t.indexOf(e)};return i("network")?this.lang["Network Error"]:i("media")||i("parse")||i("demux")||i("remux")||i("decode")?this.lang["Media Error"]:e}},{key:"hideError",value:function(){fe(this.player.dom.container).remove(Bi)}}]),t}(),Br=function(e){function i(e){var t;return a(this,i),(t=h(this,c(i).call(this,e))).nt=t.player.dom.notice,t._t=null,Wn(t.player,d(d(t))).method("notice"),t}return u(i,zn),s(i,[{key:"notice",value:function(e){var t=1<arguments.length&&arguments[1]!==undefined?arguments[1]:3e3;this.setContent(e),0<t&&this.autoHide(t)}},{key:"hide",value:function(){this.setVisible(!1)}},{key:"show",value:function(){this.setVisible(!0)}},{key:"autoHide",value:function(e){var t=this;this.show(),this._t&&(clearTimeout(this._t),this._t=null),setTimeout(function(){return t.hide()},e)}},{key:"setContent",value:function(e){this.nt.innerHTML=e}},{key:"setVisible",value:function(e){e?fe(this.nt).remove(tn):fe(this.nt).add(tn)}},{key:"remove",value:function(){p(c(i.prototype),"remove",this).call(this),this._t&&clearTimeout(this._t)}}]),i}(),Ir=function(e){function i(e){var t;return a(this,i),(t=h(this,c(i).call(this,e))).isMobile=O(),t.onPlayer(cn,function(){t.onProviderInited(e)}),t}return u(i,zn),s(i,[{key:"onProviderInited",value:function(){var e=Ie.call(this.player),t=this.getActiveSource(e),i=this.getPathListBySources(e);this.init(),1<e.length&&(this.isMobile?this.initMobile(i,e,t):(this.initQuality(e,t),0<i.length&&this.initPath(e,t)))}},{key:"init",value:function(){this.mobilePopup&&this.mobilePopup.destroy(),this.qsPopup&&this.qsPopup.destroy(),this.psPopup&&this.psPopup.destroy(),this.player.dom.switchPath.innerHTML="",this.player.dom.switchQuality.innerHTML=""}},{key:"initMobile",value:function(e,t,i){var n=this.player.dom,r=n.container,o=n.switchQuality,a=this.getSourcesByPath(i.path,t),s=this.createMobileMenuitem(a,e,i.path);this.mobilePopup=this.createTooltip(r,o,s),s.addEventListener("click",this.mobilePopup.hide),this.addEventClick(s.querySelectorAll('[type="path"]'),this.switchPath),this.addEventClick(s.querySelectorAll('[type="quality"]'),this.switchQuality),i&&(this.player.dom.switchQuality.innerHTML=i.label)}},{key:"initQuality",value:function(e,t){var i=this.player.dom,n=i.container,r=i.switchQuality,o=this.getSourcesByPath(t.path,e),a=this.createQualityMenuitem(o);this.addEventClick(a.querySelectorAll('[type="quality"]'),this.switchQuality),this.qsPopup=this.createTooltip(n,r,a),t&&(this.player.dom.switchQuality.innerHTML=t.label)}},{key:"initPath",value:function(e,t){var i=this.player.dom,n=i.container,r=i.switchPath,o=this.getPathListBySources(e),a=this.createPathMenuitem(t.path,o);this.addEventClick(a.querySelectorAll('[type="path"]'),this.switchPath),this.psPopup=this.createTooltip(n,r,a),t&&(this.player.dom.switchPath.innerHTML=t.path_name)}},{key:"addEventClick",value:function(e,t){var i=this;e.forEach(function(e){e.onclick=function(){return t.call(i,e)}})}},{key:"getActiveSource",value:function(e){return e.filter(function(e){return e.active})[0]}},{key:"switchQuality",value:function(e){var t=Number(e.getAttribute("value"));this.player.switchQuality(t),this.isMobile?this.mobilePopup.hide():this.qsPopup.hide()}},{key:"switchPath",value:function(e){var t=Ie.call(this.player),i=e.getAttribute("value"),n=t.find(function(e){return e.path===i});this.player.switchQuality(Number(n.index)),this.isMobile?this.mobilePopup.hide():this.psPopup.hide()}},{key:"getSourcesByPath",value:function(t,e){return e.filter(function(e){return e.path===t})}},{key:"getPathListBySources",value:function(e){var t=e.filter(function(e){return e.path&&e.path_name}),i=[];return t.forEach(function(t){-1<i.findIndex(function(e){return e.path===t.path})||i.push({path:t.path,path_name:t.path_name})}),i}},{key:"createMobileMenuitem",value:function(e,t,i){var n=t.map(function(e){return'<div class="'.concat(Ei," ").concat(i===e.path?nn:"",'" type="path" value="').concat(e.path,'">\n         <span class="').concat(xi,'">').concat(e.path_name,"</span>\n       </div>")}).join(""),r=e.map(function(e){return'<div class="'.concat(Ei," ").concat(e.active?nn:"",'" type="quality" value="').concat(e.index,'">\n         <span class="').concat(xi,'">').concat(e.label,"</span>\n       </div>")}).join("");return ve('<div class="'.concat(Pi,'">\n                   <div class="').concat(Si,'">\n                     <div>\n                       <div class="').concat(Li,'"><span>').concat(this.lang.Select,'：</span></div>\n                       <div class="').concat(Mi,'">').concat(r,'</div>\n                     </div>\n                     <div style="display: ').concat(0!==t.length?"flex":"none",'">\n                       <div class="').concat(Li,'"><span>').concat(this.lang.Line,'：</span></div>\n                       <div class="').concat(Mi,'">').concat(n,"</div>\n                     </div>\n                   </div>\n                 </div>"))}},{key:"createQualityMenuitem",value:function(e){var t=e.map(function(e){return'<div class="'.concat(Ei," ").concat(e.active?nn:"",'" type="quality" value="').concat(e.index,'">\n         <span class="').concat(xi,'">').concat(e.label,"</span>\n       </div>")}).join("");return ve('<div class="'.concat(Pi,'"><div class="').concat(Si,'">').concat(t,"</div></div>"))}},{key:"createPathMenuitem",value:function(t,e){var i=4<e.length&&!this.mobile,n=e.map(function(e){return'<div title="'.concat(e.path_name,'" class="').concat(Ei," ").concat(t===e.path?nn:"",'" type="path" value="').concat(e.path,'">\n         <span class="').concat(xi,'">').concat(e.path_name,"</span>\n       </div>")}).join("");return ve('<div class="'.concat("mudu-path-wrap"," ").concat(i?"mudu-path-multi":"",'">\n                                <div class="').concat(Si,'">').concat(n,"</div>\n                              </div>"))}},{key:"createTooltip",value:function(e,t,i){var n=this,r=$n(t,{trigger:"click",content:i,container:e,distance:0,"class":"mudu-popup mudu-quality ".concat(this.isMobile?Ii:""),getMaxHeight:function(e){var t=e.height;return n.isMobile?t:t-70}});return this.onPlayer(dn,r.destroy),r}}]),i}(),Or="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};var jr="undefined"!=typeof window?window:void 0!==Or?Or:"undefined"!=typeof self?self:{},qr=function $o(e){var t=Wr.call(e);return"[object Function]"===t||"function"==typeof e&&"[object RegExp]"!==t||"undefined"!=typeof window&&(e===window.setTimeout||e===window.alert||e===window.confirm||e===window.prompt)},Wr=Object.prototype.toString;var zr=function Zo(e,t){return e(t={exports:{}},t.exports),t.exports}(function(e,t){(t=e.exports=function i(e){return e.replace(/^\s*|\s*$/g,"")}).left=function(e){return e.replace(/^\s*/,"")},t.right=function(e){return e.replace(/\s*$/,"")}}),Vr=(zr.left,zr.right,Function.prototype.toString),Nr=/^\s*class\b/,Ur=function(e){try{var t=Vr.call(e);return Nr.test(t)}catch(i){return!1}},Qr=Object.prototype.toString,Xr="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag,Gr=function Gr(e){if(!e)return!1;if("function"!=typeof e&&"object"!=typeof e)return!1;if("function"==typeof e&&!e.prototype)return!0;if(Xr)return function(e){try{return!Ur(e)&&(Vr.call(e),!0)}catch(t){return!1}}(e);if(Ur(e))return!1;var t=Qr.call(e);return"[object Function]"===t||"[object GeneratorFunction]"===t},Kr=Object.prototype.toString,Yr=Object.prototype.hasOwnProperty,Jr=function Jr(e,t,i){for(var n=0,r=e.length;n<r;n++)Yr.call(e,n)&&(null==i?t(e[n],n,e):t.call(i,e[n],n,e))},$r=function $r(e,t,i){for(var n=0,r=e.length;n<r;n++)null==i?t(e.charAt(n),n,e):t.call(i,e.charAt(n),n,e)},Zr=function Zr(e,t,i){for(var n in e)Yr.call(e,n)&&(null==i?t(e[n],n,e):t.call(i,e[n],n,e))},eo=function ea(e,t,i){if(!Gr(t))throw new TypeError("iterator must be a function");var n;3<=arguments.length&&(n=i),"[object Array]"===Kr.call(e)?Jr(e,t,n):"string"==typeof e?$r(e,t,n):Zr(e,t,n)},to=function(e){if(!e)return{};var o={};return eo(zr(e).split("\n"),function(e){var t,i=e.indexOf(":"),n=zr(e.slice(0,i)).toLowerCase(),r=zr(e.slice(i+1));"undefined"==typeof o[n]?o[n]=r:(t=o[n],"[object Array]"===Object.prototype.toString.call(t)?o[n].push(r):o[n]=[o[n],r])}),o},io=function ta(){for(var e={},t=0;t<arguments.length;t++){var i=arguments[t];for(var n in i)no.call(i,n)&&(e[n]=i[n])}return e},no=Object.prototype.hasOwnProperty;var ro=so,oo=so;function ao(e,t,i){var n=e;return qr(t)?(i=t,"string"==typeof e&&(n={uri:e})):n=io(t,{uri:e}),n.callback=i,n}function so(e,t,i){return lo(t=ao(e,t,i))}function lo(n){if("undefined"==typeof n.callback)throw new Error("callback argument missing");var r=!1,o=function(e,t,i){r||(r=!0,n.callback(e,t,i))};function t(e){return clearTimeout(l),e instanceof Error||(e=new Error(""+(e||"Unknown XMLHttpRequest Error"))),e.statusCode=0,o(e,v)}function e(){if(!a){var e;clearTimeout(l),e=n.useXDR&&s.status===undefined?200:1223===s.status?204:s.status;var t=v,i=null;return 0!==e?(t={body:function r(){var e=undefined;if(e=s.response?s.response:s.responseText||function n(e){try{if("document"===e.responseType)return e.responseXML;var t=e.responseXML&&"parsererror"===e.responseXML.documentElement.nodeName;if(""===e.responseType&&!t)return e.responseXML}catch(i){}return null}(s),f)try{e=JSON.parse(e)}catch(t){}return e}(),statusCode:e,method:c,headers:{},url:u,rawRequest:s},s.getAllResponseHeaders&&(t.headers=to(s.getAllResponseHeaders()))):i=new Error("Internal XMLHttpRequest Error"),o(i,t,t.body)}}var i,a,s=n.xhr||null;s||(s=n.cors||n.useXDR?new so.XDomainRequest:new so.XMLHttpRequest);var l,u=s.url=n.uri||n.url,c=s.method=n.method||"GET",d=n.body||n.data,h=s.headers=n.headers||{},p=!!n.sync,f=!1,v={body:undefined,headers:{},statusCode:0,method:c,url:u,rawRequest:s};if("json"in n&&!1!==n.json&&(f=!0,h.accept||h.Accept||(h.Accept="application/json"),"GET"!==c&&"HEAD"!==c&&(h["content-type"]||h["Content-Type"]||(h["Content-Type"]="application/json"),d=JSON.stringify(!0===n.json?d:n.json))),s.onreadystatechange=function m(){4===s.readyState&&setTimeout(e,0)},s.onload=e,s.onerror=t,s.onprogress=function(){},s.onabort=function(){a=!0},s.ontimeout=t,s.open(c,u,!p,n.username,n.password),p||(s.withCredentials=!!n.withCredentials),!p&&0<n.timeout&&(l=setTimeout(function(){if(!a){a=!0,s.abort("timeout");var e=new Error("XMLHttpRequest timeout");e.code="ETIMEDOUT",t(e)}},n.timeout)),s.setRequestHeader)for(i in h)h.hasOwnProperty(i)&&s.setRequestHeader(i,h[i]);else if(n.headers&&!function y(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}(n.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in n&&(s.responseType=n.responseType),"beforeSend"in n&&"function"==typeof n.beforeSend&&n.beforeSend(s),s.send(d||null),s}function uo(e,t){var i=ye(),n=se(t),r={time:i};n.forEach(function(e){r[e]=_e(t[e])});try{ro({url:e+"?time="+decodeURIComponent(i),method:"POST",body:_e(r),headers:{"Content-Type":"application/json"}},re)}catch(o){}}function co(e,t){var i=function n(i){return se(i).map(function(e){var t="string"!=typeof i[e]?_e(i[e]):i[e];return"".concat(e,"=").concat(encodeURIComponent(t))}).join("&")}(g({},t,{time:ye()}));ro("".concat(e,"?").concat(i),re)}so.XMLHttpRequest=jr.XMLHttpRequest||function ia(){},so.XDomainRequest="withCredentials"in new so.XMLHttpRequest?so.XMLHttpRequest:jr.XDomainRequest,function na(e,t){for(var i=0;i<e.length;i++)t(e[i])}(["get","put","post","patch","head","delete"],function(n){so["delete"===n?"del":n]=function(e,t,i){return(t=ao(e,t,i)).method=n.toUpperCase(),lo(t)}}),ro["default"]=oo;var ho=function(e){function i(e){var t;return a(this,i),(t=h(this,c(i).call(this,e))).perfLogUrl=e._config.perfLogUrl,t.buffer_records=[],t.metric_records=[],t.provider_is_html5=!1,t.provider_name="",t.stream_url="",t.perf_id="",t.perf_paused=!0,Wn(t.player,d(d(t))).method("getMediaHeight").method("getMediaWidth").method("getMetrics"),t.perfLogUrl?W()?h(t,d(d(t))):(t.calcTimer=new cr({gap:3e3}),t.recordTimer=new cr({gap:800}),t.onPlayer(cn,t._onProviderInited.bind(d(d(t)))),t.onPlayer(dn,t._onProviderRemoved.bind(d(d(t)))),t.recordTimer.on("tick",t._onRecordTimerTick.bind(d(d(t)))),t.recordTimer.on("start",t._onRecordTimerTick.bind(d(d(t)))),t.calcTimer.on("tick",t._onCalcTimerTick.bind(d(d(t)))),t):h(t,d(d(t)))}return u(i,zn),s(i,[{key:"remove",value:function(){p(c(i.prototype),"remove",this).call(this),this.recordTimer&&this.recordTimer.stop(),this.calcTimer&&this.calcTimer.stop()}},{key:"getMediaHeight",value:function(){return this.provider()?this.provider().getHeight():-1}},{key:"getMeidaWidth",value:function(){return this.provider()?this.provider().getWidth():-1}},{key:"getMetrics",value:function(){return this.provider()?this.provider().getMetrics():null}},{key:"recordMetrics",value:function(){this.metric_records.push(g({time:this._getTs(),pos:this.player.model.progress.getPosition()},this.getMetrics()))}},{key:"calcBufferTimes",value:function(){var t=this._getTs(),e=this.buffer_records.filter(function(e){return e.time>=t-3e3&&e.time<t});return this.buffer_records=this.buffer_records.filter(function(e){return e.time<t-3e4}),{times:e.filter(function(e){return"waiting"===e.type}).length,records:e}}},{key:"calcBuffer",value:function(){var e=this.player.model.progress.getBuffer(),t=e.reduce(function(e,t){return e+(t.end-t.start)},0);return{buffer:e,length:t}}},{key:"calcMetrics",value:function(){var t=this._getTs(),e=this.metric_records.filter(function(e){return e.time>=t-3e3&&e.time<=t});if(this.metric_records=this.metric_records.filter(function(e){return e.time<t-3e3}),0!==e.length){var i,n={},r=e[0];return ie("undefined",r.fps)?ie("undefined",r.mozParsedFrames)?ie("undefined",r.webkitAudioDecodedByteCount)?i="other":(i="webkit",n=this._calcWebkitMetrics(e)):(i="moz",n=this._calcMozMetrics(e)):(i="flash",n=this._calcFlashMetrics(e)),g({},n,{type:i,records:e})}}},{key:"_calcFlashMetrics",value:function(e){var t={fps:0,bps:0},i=e.map(function(e){return e.fps}).filter(function(e){return 0<e}),n=e.map(function(e){return e.bps}).filter(function(e){return 0<e}),r=i.length,o=n.length;return i.forEach(function(e){t.fps+=e/r}),n.forEach(function(e){t.bps+=e/o}),t}},{key:"_calcWebkitMetrics",value:function(e){var t={fps:0,bps:0,decodedFps:0,droppedFps:0,audioBps:0,videoBps:0,recordsLength:e.length};if(1===e.length)return t;var i=e.map(function(e,t,i){return 0===t?{time:0}:{time:i[t].time-i[t-1].time,audioDecodedBytes:i[t].webkitAudioDecodedByteCount-i[t-1].webkitAudioDecodedByteCount,videoDecodedBytes:i[t].webkitVideoDecodedByteCount-i[t-1].webkitVideoDecodedByteCount,decodedFrames:i[t].webkitDecodedFrameCount-i[t-1].webkitDecodedFrameCount,droppedFrames:i[t].webkitDroppedFrameCount-i[t-1].webkitDroppedFrameCount}}).filter(function(e){return 0!==e.time}).map(function(e){var t=e.time/1e3,i={decodedFps:e.decodedFrames/t,droppedFps:e.droppedFrames/t,audioBps:e.audioDecodedBytes/t,videoBps:e.videoDecodedBytes/t,time:t};return i.fps=i.decodedFps+i.droppedFps,i.bps=i.audioBps+i.videoBps,i}),n=i.reduce(function(e,t){return e+t.time},0);return i.forEach(function(e){t.decodedFps=e.decodedFps*e.time/n+t.decodedFps,t.droppedFps=e.droppedFps*e.time/n+t.droppedFps,t.audioBps=e.audioBps*e.time/n+t.audioBps,t.videoBps=e.videoBps*e.time/n+t.videoBps}),t.fps=t.decodedFps+t.droppedFps,t.bps=t.audioBps+t.videoBps,t}},{key:"_calcMozMetrics",value:function(e){var t={fps:0,parsedFps:0,decodedFps:0,presentedFps:0,paintedFps:0,recordsLength:e.length};if(1===e.length)return t;var i=e.map(function(e,t,i){return 0===t?{time:0}:{time:i[t].time-i[t-1].time,parsedFrames:i[t].mozParsedFrames-i[t-1].mozParsedFrames,decodedFrames:i[t].mozDecodedFrames-i[t-1].mozDecodedFrames,presentedFrames:i[t].mozPresentedFrames-i[t-1].mozPresentedFrames,paintedFrames:i[t].mozPaintedFrames-i[t-1].mozPaintedFrames}}).filter(function(e){return 0!==e.time}).map(function(e){var t=e.time/1e3,i={parsedFps:e.parsedFrames/t,decodedFps:e.decodedFrames/t,presentedFps:e.presentedFrames/t,paintedFps:e.paintedFrames/t,time:t};return i.fps=i.parsedFps,i}),n=i.reduce(function(e,t){return e+t.time},0);return i.forEach(function(e){t.parsedFps=e.parsedFps*e.time/n+t.parsedFps,t.decodedFps=e.decodedFps*e.time/n+t.decodedFps,t.presentedFps=e.presentedFps*e.time/n+t.presentedFps,t.paintedFps=e.paintedFps*e.time/n+t.paintedFps}),t.fps=t.parsedFps,t}},{key:"_onProviderInited",value:function(e){var t=e.file;this.stream_url=t,this.provider_is_html5=this.player._provider.html5,this.provider_name=this.player._provider.name,this.perf_id=this.player._status.uniqId+"_"+we(2),this.buffer_records=[],this.metric_records=[],this.onProvider("waiting",this._onWaiting.bind(this)),this.onProvider("play",this._onPlay.bind(this)),this.onProvider(Hn,this._onPause.bind(this))}},{key:"_onProviderRemoved",value:function(){this.stream_url="",this.provider_name="",this.buffer_records=[],this.metric_records=[],this.calcTimer&&this.calcTimer.stop(),this.recordTimer&&this.recordTimer.stop()}},{key:"_onCalcTimerTick",value:function(e){var t=e.isStop;e.duration;if(!t){var i=this.calcMetrics();if(i){var n=this.calcBufferTimes(),r=this.calcBuffer(),o=i.records[0],a=i.records[i.records.length-1],s=o&&o.pos,l=a&&a.pos-o.pos,u={fps:i.fps,bps:i.bps,waiting_times:n.times,buffer_length:r.length,decoded_fps:ie("number",i.decodedFps)?i.decodedFps:-1,dropped_fps:ie("number",i.droppedFps)?i.droppedFps:-1,audio_bps:ie("number",i.audioBps)?i.audioBps:-1,video_bps:ie("number",i.videoBps)?i.videoBps:-1,records_count:i.records.length,record_pos:s,record_time:l,metric_type:i.type,buffer_detail:JSON.stringify(r.buffer),metrics_detail:JSON.stringify(i),stream_url:this.stream_url,metric_id:this.perf_id,user_agent:navigator.userAgent,refer:window.location.href};co(this.perfLogUrl,u)}}}},{key:"_onRecordTimerTick",value:function(e){!e.isStop&&this.recordMetrics()}},{key:"_onWaiting",value:function(){this.buffer_records.push({type:"waiting",pos:this.player.model.progress.getPosition(),time:this._getTs()})}},{key:"_onPlay",value:function(){this.buffer_records.push({type:"play",pos:this.player.model.progress.getPosition(),time:this._getTs()}),this.recordTimer.start(),this.calcTimer.start()}},{key:"_onPause",value:function(){this.recordTimer.tick(),this.recordTimer.stop(),this.calcTimer.tick(),this.calcTimer.stop()}},{key:"_getTs",value:function(){return(new Date).getTime()}}]),i}(),po=function(e){function i(e){var t;return a(this,i),(t=h(this,c(i).call(this,e))).onPlayer(cn,t._onProviderInited.bind(d(d(t)))),Wn(t.player,d(d(t))).method("getTextTracks").method("setTextTrackEnable").method("setTextTrackDisable").method("getTextTrackCues").method("getTextTrackActiveCues"),t}return u(i,zn),s(i,[{key:"getTextTracks",value:function(){return this.provider()?this.provider().getTextTracks():[]}},{key:"getTextTrackCues",value:function(){var e=0<arguments.length&&arguments[0]!==undefined?arguments[0]:0;return this.provider()?this.provider().getTextTrackCues(e):[]}},{key:"getTextTrackActiveCues",value:function(){var e=0<arguments.length&&arguments[0]!==undefined?arguments[0]:0;return this.provider()?this.provider().getTextTrackActiveCues(e):[]}},{key:"setTextTrackEnable",value:function(){var e=0<arguments.length&&arguments[0]!==undefined?arguments[0]:0;if(this.provider())return this.provider().setTextTrackEnable(e)}},{key:"setTextTrackDisable",value:function(){var e=0<arguments.length&&arguments[0]!==undefined?arguments[0]:0;if(this.provider())return this.provider().setTextTrackDisable(e)}},{key:"_onProviderInited",value:function(){this.onProvider(In,this._onTexttrackAdd.bind(this)),this.onProvider(On,this._onTexttrackChange.bind(this)),this.onProvider(jn,this._onCueChange.bind(this))}},{key:"_onCueChange",value:function(e){var t=e.track,i=e.cues,n=e.activeCues;this.player.trigger(Rn,{track:t,cues:i,activeCues:n,type:Rn})}},{key:"_onTexttrackAdd",value:function(e){this.player.trigger(Cn,{track:e,type:Cn})}},{key:"_onTexttrackChange",value:function(e){this.player.trigger(Mn,{tracks:e,type:Mn})}}]),i}(),fo=function(e){function i(e){var t;return a(this,i),(t=h(this,c(i).call(this,e)))._fontSize=0,t._borderRadius=0,t._subtitleTrackIdx=-1,t._showSubtitles=e._config.showSubtitle,Wn(t.player,d(d(t))).method("getShowSubtitle").method("setShowSubtitle").method("setShowingTextTrackIndex").method("getShowingTextTrackIndex"),t.onPlayer(dn,t._onProviderRemoved.bind(d(d(t)))),t.onPlayer(Cn,t._onTextTrackAdd.bind(d(d(t)))),t.onPlayer(Rn,t._onCueChange.bind(d(d(t)))),t}return u(i,zn),s(i,[{key:"setShowSubtitle",value:function(e){(e=!!e)&&!this._isShowingSubtitles()&&this._showRandomSubtitle(),!e&&this._isShowingSubtitles()&&(this._clearShowingCues(),this._subtitleTrackIdx=-1),this._showSubtitles=e}},{key:"getShowSubtitle",value:function(){return this._showSubtitles}},{key:"setShowingTextTrackIndex",value:function(){var e=0<arguments.length&&arguments[0]!==undefined?arguments[0]:0,t=this.player.model.textTrack.getTextTracks()[e];e!==this._subtitleTrackIdx&&t&&(0<=this._subtitleTrackIdx&&this.player.model.textTrack.setTextTrackDisable(this._subtitleTrackIdx),this._subtitleTrackIdx=e,this.player.model.textTrack.setTextTrackEnable(e))}},{key:"getShowingTextTrackIndex",value:function(){return this._subtitleTrackIdx}},{key:"_onCueChange",value:function(e){var t=e.track,i=e.activeCues;this.player.model.textTrack.getTextTracks().indexOf(t)===this._subtitleTrackIdx&&this._showActiveCues(i)}},{key:"_onTextTrackAdd",value:function(e){e.track;this._showSubtitles&&-1===this._subtitleTrackIdx&&this._showRandomSubtitle()}},{key:"_updateSubtitleStyle",value:function(){var t=this;[].slice.call(document.querySelectorAll(".".concat(gt))).forEach(function(e){e.style.fontSize=t._fontSize+"px",e.style.borderRadius=t._borderRadius+"px"})}},{key:"_onProviderRemoved",value:function(){this._clearShowingCues(),this._subtitleTrackIdx=-1}},{key:"_isShowingSubtitles",value:function(){return this._showSubtitles&&-1!==this._subtitleTrackIdx}},{key:"_selectSubtitleTrack",value:function(){for(var e,t,i=this.player.model.textTrack.getTextTracks(),n=0;n<i.length;n++)"subtitles"!==i[n].kind&&"captions"!==i[n].kind||(e||(e={index:n,track:i[n]}),"hidden"!==i[n].mode||t||(t={index:n,track:i[n]}));return t||e||{index:-1,track:null}}},{key:"_clearShowingCues",value:function(){document.querySelector(".".concat(yt)).innerHTML=""}},{key:"_showActiveCues",value:function(e){if(!e.length)return this._clearShowingCues();e.sort(function(e,t){var i=e.startTime-t.startTime;return i||t.endTime-e.endTime});var t="font-size: ".concat(this._fontSize,"px; border-radius: ").concat(this._borderRadius,"px"),i=e.map(function(e){return'<span class="'.concat(gt,'" style="').concat(t,'">&nbsp;').concat(e.text,"&nbsp;</span>")});document.querySelector(".".concat(yt)).innerHTML=i.join("<br>")}},{key:"_setSubtitleSize",value:function(e){this._fontSize=Math.max(.025*e,14),this._fontSize=Math.min(this._fontSize,40),this._borderRadius=Math.max(.003125*e,1.5)}},{key:"_showRandomSubtitle",value:function(){var e=this._selectSubtitleTrack().index;return-1!==e&&(this.setShowingTextTrackIndex(e,!0),!0)}}]),i}(),vo="myunSyncAvailable",mo="myunSyncMessage",yo=function(e){function i(e){var t;return a(this,i),(t=h(this,c(i).call(this,e)))._available=!1,t._textTrackLabel=e._config.myunSyncTextTrackLabel,t._myunSyncTrack=null,t._myunMsgCue=null,t.onPlayer(dn,t._onProviderRemoved.bind(d(d(t)))),t.onPlayer(Cn,t._onTextTrackAdd.bind(d(d(t)))),t.onPlayer(Rn,t._onCueChange.bind(d(d(t)))),Wn(t.player,d(d(t))).method("getMyunSyncAvailable"),t}return u(i,zn),s(i,[{key:"getMyunSyncAvailable",value:function(){return this._available}},{key:"_onProviderRemoved",value:function(){this._myunSyncTrack=null,this._available=!1,this._myunMsgCue=null,this.player.trigger(vo,{type:vo,available:!1})}},{key:"_onTextTrackAdd",value:function(e){var t=e.track;if(t.label===this._textTrackLabel&&"subtitles"===t.kind){var i=this.player.model.textTrack.getTextTracks().indexOf(t);this.player.model.textTrack.setTextTrackEnable(i),this._myunSyncTrack=t,this._available=!0,this.player.trigger(vo,{type:vo,available:!0})}}},{key:"_onCueChange",value:function(e){var t=this,i=e.activeCues,n=e.cues,r={};if(e.track===this._myunSyncTrack){if(0!==i.length)r=i.pop();else{if(!F())return;var o=Math.floor(this.player._container.querySelector("video").currentTime);if(!(r=n.find(function(e){return o===Math.floor(e.startTime)}))||r.startTime!==r.endTime)return}if(r!==this._myunMsgCue){this._myunMsgCue=r;var a=JSON.parse(r.text);Array.isArray(a)&&a[0].ts_ms&&a[0].content?a.forEach(function(e){setTimeout(function(){return t.player.trigger(mo,{type:mo,message:e.content||""})},e.ts_ms)}):this.player.trigger(mo,{type:mo,message:r.text,cue:r,cues:n})}}}}]),i}(),go=function(){return!(!window.screen||!window.screen.orientation)},ko=function(e){return window.screen.orientation.lock(e)},bo=function(){window.screen.orientation.unlock()},_o=function(e){function i(e){var t;return a(this,i),(t=h(this,c(i).call(this,e)))._onFullscreen=t._onFullscreen.bind(d(d(t))),t._available=go(),t._available&&t.onPlayer(bn,t._onFullscreen),t}return u(i,zn),s(i,[{key:"_onFullscreen",value:function(e){if(e.fullscreen){if(this.provider()){var t=this.provider().getWidth(),i=this.provider().getHeight(),n=function a(){return{width:window.screen.width,height:window.screen.height}}();if(t&&i){var r=t/i,o=n.width/n.height;ko(o<r?"landscape":"portrait")["catch"](re)}}}else bo()}}]),i}(),wo=function(e){function i(e){var t;return a(this,i),(t=h(this,c(i).call(this,e)))._is360loneWindow=!1,t._timer=0,e._config.recordRestrict.enable360LoneWindowCloseStream&&(M()||C())&&t.oncePlayer(cn,function(){e.timer.raf.on("tick",function(e){e.isStop||t._onTimerTick()})}),t}return u(i,zn),s(i,[{key:"_onTimerTick",value:function(){var e=this,t=this._detect360loneWindow(),i=this.player;this._is360loneWindow!==t&&(this._is360loneWindow=t,this._is360loneWindow?(clearTimeout(this._timer),this._timer=setTimeout(function(){e._showRecordRestrict360(),i.stop(),e._removeProviderElement()},20)):this._hideRecordREstrict360()),this._is360loneWindow&&(i.dom.controllerWrap.style.display="none")}},{key:"_showRecordRestrict360",value:function(){var e=this.player.dom.recordRestrict360,t=C()?"":"top:50%;margin-top:-0.75em;";e.setAttribute("style","position:absolute;top:0;left:0;right:0;bottom:0;background-color:#000;z-index:9999;"),e.innerHTML='<div class="'.concat(rn,'" style="position:absolute;').concat(t,'width:100%;text-align:center;color:#fff;font-size:1.25em;line-height:1.5em;">视频禁止在小窗口播放，请退出小窗后刷新页面继续观看</div>')}},{key:"_hideRecordREstrict360",value:function(){this.player.dom.recordRestrict360.setAttribute("style","")}},{key:"_detect360loneWindow",value:function(){var e=this.player._provider,t=this.player.dom.container;if(e){if(e.html5){var i=t.querySelector("div").getAttribute("style")||"";return 0<=i.indexOf("visibility:hidden")&&0<=i.indexOf("opacity:0")}if(e.flash)return!!document.querySelector("object").style.width}return this._is360loneWindow}},{key:"_removeProviderElement",value:function(){var e=this.player.dom.videoWrap,t=e.querySelector("video"),i=e.querySelector("object");t&&e.removeChild(t),i&&e.removeChild(i)}},{key:"remove",value:function(){clearTimeout(this._timer),p(c(i.prototype),"remove",this).call(this)}}]),i}(),To=function(e){function i(e){var t;return a(this,i),(t=h(this,c(i).call(this,e)))._enableDetect=!1,t._isLive=!1,t._streamType="",Wn(t.player,d(d(t))).method("setLiveEndDetect").method("getLiveEndDetect"),t.onPlayer(cn,t._onProviderInit.bind(d(d(t)))),t.onPlayer(Sn,t._onIdle.bind(d(d(t)))),t.onPlayer(Ln,t._onError.bind(d(d(t)))),t.onPlayer("buffer",t._onBuffer.bind(d(d(t)))),W()&&t.onPlayer(Tn,t._onTime.bind(d(d(t)))),t}return u(i,zn),s(i,[{key:"setLiveEndDetect",value:function(e){this._enableDetect=!!e}},{key:"getLiveEndDetect",value:function(){return this._enableDetect}},{key:"_onProviderInit",value:function(e){var t=e.isLive,i=e.type;this._isLive=t,this._streamType=i}},{key:"_shouldDetect",value:function(e){return e?this._enableDetect&&this._isLive&&this._streamType===e:this._enableDetect&&this._isLive}},{key:"_triggerEvt",value:function(){this.player.trigger(Fn,{type:Fn,liveEnd:!0})}},{key:"_onIdle",value:function(){(this._shouldDetect("flv")||this._shouldDetect("hls")||this._shouldDetect("m3u8"))&&this._triggerEvt()}},{key:"_onError",value:function(e){var t=e.fatal;(this._shouldDetect("m3u8")||this._shouldDetect("hls"))&&t&&this._triggerEvt()}},{key:"_onBuffer",value:function(){(this._shouldDetect("rtmp")||this._shouldDetect("hls")||this._shouldDetect("m3u8"))&&this._triggerEvt()}},{key:"_onTime",value:function(e){e.position;this._shouldDetect("")&&this._triggerEvt()}}]),i}(),Po=function(e){function i(e){var t;return a(this,i),(t=h(this,c(i).call(this,e))).onPlayer(cn,t._onProviderInited.bind(d(d(t)))),t.onPlayer(dn,t._onProviderRemoved.bind(d(d(t)))),t.msgList=null,t.lastMsgIdx=-2,t}return u(i,zn),s(i,[{key:"_onTick",value:function(){if(this.msgList){for(var e,t=this.player.model.progress.getPosition(),i=0;i<this.msgList.length;i++){if(t<this.msgList[i].time){e=i-1;break}}e===undefined&&(e=this.msgList.length-1),e!==this.lastMsgIdx&&(this.lastMsgIdx=e,this.player.trigger("playbackMessage",{type:"playbackMessage",prev:this.msgList[e]||null,next:this.msgList[e+1]||null}))}}},{key:"_onProviderInited",value:function(){var e=De.call(this.player);this.msgList=ie("array",e.playbackMessages)?e.playbackMessages:null,this.msgList&&this.msgList.sort(function(e,t){return e.time-t.time})}},{key:"_onProviderRemoved",value:function(){this.msgList=null,this.lastMsgIdx=-2}}]),i}(),So=function(e){function i(e){var t;return a(this,i),(t=h(this,c(i).call(this,e))).dom=null,t.createDom(),t.setPlaybackRates(e._config.playbackRates),t.onPlayer(cn,function(){t.initPlaybackRates()}),t.onPlayer(dn,function(){t.resetState()}),t.qsPopup=$n(e.dom.playbackRate,{trigger:"click",content:t.dom,container:e.dom.container,"class":"mudu-popup",getMaxHeight:function(e){return e.height-70}}),Wn(t.player,d(d(t))).method("setPlaybackRates"),t}return u(i,zn),s(i,[{key:"setPlaybackRates",value:function(e){ie("array",e)||(e=[]),this.rateList=e,this.playbackRatesLabel=this.player._config.playbackRatesLabel,"idle"===this.player.getState()||this.initPlaybackRates()}},{key:"createDom",value:function(){var e='<div><div class="'.concat(rn," ").concat(ni," ").concat(Ti,'">')+'<div class="'.concat(rn," ").concat(wi,'"></div>')+"</div></div>";this.dom=ve(e)}},{key:"initPlaybackRates",value:function(){this.resetState(),this.updateRateItem(),this.updateControlRate(),this.updateSwitchText()}},{key:"resetState",value:function(){this.player.setPlaybackRate(1),Oe.call(this.player,"null"),this.qsPopup.hide()}},{key:"updateControlRate",value:function(){var e=this.rateList.length,t=De.call(this.player).isLive,i=this.player.dom.container,n=t||e<1||!this.player._provider||!this.player._provider.isPlaybackRateSupported;fe(i).remove(Gi),fe(i).add(n?"mudu-play-back-rate-hide":"mudu-play-back-rate-show")}},{key:"updateSwitchText",value:function(){var e=this.rateList.filter(function(e){return e.active})[0];this.player.dom.playbackRate.innerHTML=e?e.label:this.playbackRatesLabel}},{key:"updateRateItem",value:function(){var e=this.rateList.map(function(e,t){return'<div class="'.concat(rn," ").concat(bi,'" type="value" value="').concat(t,'">')+'<div class="'.concat(rn," ").concat(_i,'"></div>')+'<div class="'.concat(rn," ").concat("mudu-menuitem-label",'">').concat(e.label,"</div>")+"</div>"}).join("");this.dom.querySelector(".".concat(Ti)).innerHTML=e;for(var n=this.dom.querySelectorAll('[type="value"]'),r=this,o=function o(i){var e=n[i],t=r.rateList[i].playbackRate;e.onclick=function(){r.player.setPlaybackRate(+t),Oe.call(r.player,i),r.player.dom.playbackRate.innerHTML=r.rateList[i].label,r.rateList.map(function(e,t){n[t].querySelector(".".concat(_i)).innerHTML=t===i?'<span class="'.concat(rn," ").concat(at,'"></span>'):""}),r.qsPopup.hide()},e.querySelector(".".concat(_i)).innerHTML=1===t?'<span class="'.concat(rn," ").concat(at,'"></span>'):""},t=0;t<n.length;t++)o(t)}}]),i}();function Eo(e,t){var i,n,r=e.width/e.height,o=t.width/t.height;return r<o?(i=e.width,n=e.width/o):(i=e.height*o,n=e.height),{width:i,height:n}}function xo(e){return e}var Lo=function(e){function i(e){var t;return a(this,i),(t=h(this,c(i).call(this,e))).config=t.player._config,t.container=t.player.dom.watermark,t.watermarkTimers=[],Wn(t.player,d(d(t))).method("setWatermark").method("clearWatermark"),t.subEvents(),t}return u(i,zn),s(i,[{key:"handleResize",value:function(){var e,t=this.player.dom.container,i=this.player.dom.watermark,n={width:t.offsetWidth,height:t.offsetHeight},r={width:i.offsetWidth,height:i.offsetHeight};switch(this.config.stretching){case"contain":e=Eo(n,r);break;case"cover":e=function s(e,t){var i,n,r=e.width/e.height,o=t.width/t.height;return o<r?(i=e.width,n=e.width/o):(i=e.height*o,n=e.height),{width:i,height:n}}(n,r);break;case"fill":e=function l(e){return e}(n);break;case"none":e=xo(r);break;case"scale-down":e=function u(e,t){return t.width>e.width||t.height>e.height?Eo(e,t):xo(e)}(n,r)}var o=e.width/r.width,a=e.height/r.height;Se(i,{transform:"scale(".concat(o,", ").concat(a===o?o:a,") translate(-50%, -50%)"),color:"#fff"})}},{key:"subEvents",value:function(){var n=this;this.removeResizeEventListener=Ee(this.player.dom.container,function(){n.handleResize()}),this.onPlayer(dn,function(){n.clearWatermark(),n.w=n.h=0}),this.onPlayer(cn,function(){n.player.off(mn,n.outerPlayEventListener),n.outerPlayEventListener=n.player.once(mn,function(){n.cancelEnsureMetrics&&n.cancelEnsureMetrics(),n.cancelEnsureMetrics=function e(t,i){var n=null,r=function r(){var e=t.getMetrics()||{};1<e.videoWidth&&1<e.videoWidth?i(e):n=setTimeout(r,100)};return r(),function(){return n&&clearTimeout(n)}}(n.player,function(e){var t=e.videoWidth,i=e.videoHeight;n.w=t,n.h=i,n.setWatermark(n.config.watermark)})})})}},{key:"setWatermark",value:function(){var e=0<arguments.length&&arguments[0]!==undefined?arguments[0]:this.config.watermark;if(Se(this.container,{width:this.w+"px",height:this.h+"px"}),this.handleResize(),ie("function",this.config.watermark=e))return this.customRender(e);ie("object",e)&&(e=[e]),ie("array",e)&&(this.config.watermark=e,this.clearWatermark(),1<this.w&&1<this.h&&this.render(e))}},{key:"render",value:function(e){for(var t=0;t<e.length;t++){var i=this.resolveOptions(e[t]);switch(i.placement){case"top-left":this.genTopLeft(i);break;case"top-right":this.genTopRight(i);break;case"bottom-left":this.genBottomLeft(i);break;case"bottom-right":this.genBottomRight(i);break;case"repeat":this.genRepeat(i);break;case"random":this.genRandom(i)}}}},{key:"customRender",value:function(e){var t=this,i=e();i&&i.then&&i.then(function(e){e&&e instanceof HTMLElement&&(t.clearWatermark(),t.container.appendChild(e))})}},{key:"clearWatermark",value:function(){for(this.container.innerHTML="";this.watermarkTimers.length;)clearInterval(this.watermarkTimers.pop())}},{key:"resolveOptions",value:function(e){var t=g({},{designWidth:750,type:"text",data:"",placement:"repeat",opacity:.5,fontSize:16,fontFamily:"PingFang SC",color:"#FFFFFF",rotate:-25,marginTop:8,marginRight:8,marginBottom:8,marginLeft:8,cellSize:{width:250,height:140.625},imageSize:null,autoRandom:5e3},e=JSON.parse(JSON.stringify(e))),i=this.w/t.designWidth;return t.fontSize*=i,t.marginTop*=i,t.marginRight*=i,t.marginBottom*=i,t.marginLeft*=i,t.cellSize.width*=i,t.cellSize.height*=i,t.imageSize?(ie("number",t.imageSize.width)&&(t.imageSize.width*=i),ie("number",t.imageSize.height)&&(t.imageSize.height*=i)):t.imageSize={width:"auto",height:"auto"},t}},{key:"genRandom",value:function(t){var i=this,e=this.resolveElement(t),n=function n(){Se(e,{top:xe(Te(0,i.h),0,i.h-e.offsetHeight)+"px",left:xe(Te(0,i.w),0,i.w-e.offsetWidth)+"px"})},r=function r(){if(0<t.autoRandom){var e=setInterval(function(){n()},t.autoRandom);i.watermarkTimers.push(e)}n()};"image"===t.type?e.onload=function(){r()}:r(),this.container.appendChild(e)}},{key:"genTopLeft",value:function(e){var t=this.resolveElement(e);Se(t,{top:e.marginTop+"px",left:e.marginLeft+"px"}),this.container.appendChild(t)}},{key:"genTopRight",value:function(e){var t=this.resolveElement(e);Se(t,{top:e.marginTop+"px",right:e.marginRight+"px"}),this.container.appendChild(t)}},{key:"genBottomLeft",value:function(e){var t=this.resolveElement(e);Se(t,{bottom:e.marginBottom+"px",left:e.marginLeft+"px"}),this.container.appendChild(t)}},{key:"genBottomRight",value:function(e){var t=this.resolveElement(e);Se(t,{bottom:e.marginBottom+"px",right:e.marginRight+"px"}),this.container.appendChild(t)}},{key:"genRepeat",value:function(e){for(var t=e.cellSize.width,i=e.cellSize.height,n=0;n<this.w/t;n++)for(var r=0;r<this.h/i;r++){var o=document.createElement("div");fe(o).add("mudu-watermark-cell-wrap");var a=this.resolveElement(e);Se(o,{top:r*i+"px",left:n*t+"px",width:t+"px",height:i+"px",transform:"rotate(".concat(e.rotate,"deg)")}),o.appendChild(a),this.container.appendChild(o)}}},{key:"resolveElement",value:function(e){return"text"===e.type?this.resolveTextElement(e):"image"===e.type?this.resolveImageElement(e):void 0}},{key:"resolveTextElement",value:function(e){var t=document.createElement("span");return t.innerHTML=e.data,Se(t,{fontFamily:e.fontFamily,fontSize:e.fontSize+"px",color:e.color,opacity:e.opacity}),fe(t).add("mudu-watermark-text"),t}},{key:"resolveImageElement",value:function(e){var t=document.createElement("img");return t.crossOrigin="Anonymous",t.src=e.data,Se(t,{opacity:e.opacity,width:e.imageSize.width+"px",height:e.imageSize.height+"px"}),fe(t).add("mudu-watermark-image"),t}},{key:"remove",value:function(){this.clearWatermark(),this.removeResizeEventListener&&this.removeResizeEventListener()}}]),i}();function Mo(){var o=this;this.timer={};var e=this._config.bufferDetectGap;(!ie("number",e)||isNaN(e)||e<=0)&&(e=200),this.timer.loading=new cr({type:"loading",gap:e}),this.timer.raf=new cr({type:"raf",isRaf:!0});var a=0,s=0,l=!1;this.timer.loading.on("tick",function(e){if(!e.isStop){s=o.model.progress.getPosition();var t=o.model.video.getState(),i="playing"===t||"buffering"===t;if(!l&&s===a&&i){var n=o.getDuration();!W()&&function r(e){return!!ie("number",e)&&!isNaN(e)}(n)&&0<n&&(l=!0,o.trigger("internal_buffer",!0))}l&&a<s&&i&&(l=!1,o.trigger("internal_buffer",!1)),a=s}});var u=-1;this.timer.raf.on("tick",function(e){if(!e.isStop){var t=o.model.resize.getWidth(),i=fe(o.dom.container).contains(qi);t<350?!i&&fe(o.dom.container).add(qi):i&&fe(o.dom.container).remove(qi),u!==t&&(o.model.subtitle._setSubtitleSize(t),o.model.subtitle._updateSubtitleStyle()),u=t;var n=+function r(e){return window.getComputedStyle?window.getComputedStyle(e):e.currentStyle?e.currentStyle:{}}(o.dom.container).fontSize.replace(/[^\d]+/,"");o._status.containerFontSize=n<16?16:n,o.model.playbackMessage._onTick()}}),this.timer.raf.start()}var Co={};function Ro(){return Co}var Fo=function(e){function i(e){var t;return a(this,i),(t=h(this,c(i).call(this)))._container=document.getElementById(e),t.formatState(),t}return u(i,Me),s(i,[{key:"formatState",value:function(){this._config={},this._config.containerId=this._container.id,this._status={uniqId:function e(){return me().format("MMDDHHmmss")+we(5)}(),state:"idle",focus:!1,isSetuped:!1,flashReady:!1,dragging:!1,index:"",containerFontSize:16},this._provider=null,this._extraProviders={},this.plugin={},this.dom={},this.timer={},this.model={}}},{key:"getUniqId",value:function(){return this._status.uniqId}},{key:"setup",value:function(e){var t=this;A(),this._status&&this._status.isSetuped&&!this._container.querySelector(dt)&&(this.remove(),console.warn("muduPlayer().setup(): please don`t setup twice")),this.formatState();var i=$e(e),n=Ye(et(),i);if(this._config=g({},this._config,n),this._config.uniqId&&(this._status.uniqId=this._config.uniqId),function o(){var e=Ro();for(var t in e){var i=e[t];i.Plugin.isSupported()&&(this.plugin[t]=new i.Plugin(this,this._config.plugin[t]))}this.trigger("internal_plugin_inited")}.call(this),this.trigger("internal_option_merged"),!ie("array",this._config.playlist))throw new Error("setup(options): you should give me a video url to play, through `options.file` or `options.playlist` array");this._status.lang=function a(t,e){"auto"===t&&(t=D());var i=t.split("-")[0],n=se(e),r=n.filter(function(e){return e===t})[0];return r||(r=n.filter(function(e){return 0===e.indexOf(i)})[0]),r||"en"}(this._config.language,this._config.localization),this._status.localization=this._config.localization[this._status.lang],this._status.isSetuped=!0,this.trigger(hn),this.trigger("setup"),qn.call(this),function s(){this.model.fullscreen=new Zn(this),this.model.video=new yr(this),this.model.progress=new kr(this),this.model.controls=new br(this),this.model.volume=new _r(this),this.model.playlist=new wr(this),this.model.hotkeys=new Pr(this),this.model.resize=new Sr(this),this.model.stretch=new Er(this),this.model.logo=new xr(this),this.model.focus=new Lr(this),this.model.bezel=new Mr(this),this.model.background=new Cr(this),this.model.dom=new Rr(this),this.model.title=new Fr(this),this.model.contextMenu=new Ar(this),this.model.error=new Hr(this),this.model.progressPopup=new Dr(this),this.model.notice=new Br(this),this.model.qualitySwitch=new Ir(this),this.model.perf=new ho(this),this.model.textTrack=new po(this),this.model.subtitle=new fo(this),this.model.myunSync=new yo(this),this.model.orientation=new _o(this),this.model.recordRestrict=new wo(this),this.model.liveEndDetect=new To(this),this.model.playbackMessage=new Po(this),this.model.playbackRate=new So(this),this.model.watermark=new Lo(this),this.trigger("internal_model_inited")}.call(this),Mo.call(this),He.call(this);var r=this._config.autoplay;return fr.call(this).then(function(){if(mr.call(t),r)try{t.play()}catch(e){console.warn(e)}return Promise.resolve()})}},{key:"remove",value:function(){A(),this._status&&this._status.isSetuped&&(function e(){this.timer.loading.stop(),this.timer.raf.stop()}.call(this),function t(){for(var e in this.model)this.model[e].remove()}.call(this),function i(){if(this.plugin)for(var e in this.plugin)this.plugin[e]&&this.plugin[e].remove()}.call(this),vr.call(this),function n(){this._container.innerHTML="",fe(this._container).remove(/mudu-.*/),fe(this._container).remove("mudu")}.call(this),this._config=null,this._status=null,this._provider=null,this.dom=null,this.timer=null,this.model=null,this.trigger("remove"))}},{key:"stop",value:function(){A(),vr.call(this)}}]),i}(),Ao=function(e){function n(e,t){var i;return a(this,n),(i=h(this,c(n).call(this,e,t)))._onVideoEvents=i._onVideoEvents.bind(d(d(i))),i._onTextTracksAdd=i._onTextTracksAdd.bind(d(d(i))),i._onTextTracksChange=i._onTextTracksChange.bind(d(d(i))),i._onTextTracksRemove=i._onTextTracksRemove.bind(d(d(i))),i._onTextTrackCueChange=i._onTextTrackCueChange.bind(d(d(i))),i.TAG="HTML5Provider",i.video_error_report=!0,i}return u(n,tr),s(n,[{key:"setup",value:function(e){var i=this,t=e.file;e.image;this._setupEvents(),this._duration=0,this.video.src=t;this.video.setAttribute("poster","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII="),this.oncePlayer("play",function(){i.oncePlayer("canSeek",function(){var t=!0;i.oncePlayer("seek",function(){t=!1}),i.oncePlayer("time",function(e){0!==e.position&&(t=!1)}),setTimeout(function(){var e=i.getPosition();"HTML5Provider"===i.TAG&&t&&0===e&&i.seek(.01)},50)})})}},{key:"getMediaElement",value:function(){var e=this.player.dom.videoWrap.querySelector("video");if(e){var t=e.textTracks;if(t&&t.length){try{e.parentNode.removeChild(e)}catch(i){console.error("remove video element error")}return null}}return this.video=e}},{key:"createMediaElement",value:function(){var e=document.createElement("video"),t=this.player._config.preload;for(var i in e.setAttribute("class",ht),e.setAttribute("preload",t),F()&&delete this.player._config.videoAttributes.loop,this.player._config.videoAttributes){var n=this.player._config.videoAttributes[i];e.setAttribute(i,n)}return this.video=e}},{key:"play",value:function(){if(this.video){this.video.setAttribute("preload","auto");try{return this.video.play()["catch"](function(e){return console.warn(e)})}catch(st){throw new Error("player cannot play")}}return Promise.resolve()}},{key:"pause",value:function(){return this.video&&this.video.pause(),Promise.resolve()}},{key:"remove",value:function(){if(this._removeEvents(),this.video){try{this.video.parentNode.removeChild(this.video)}catch(e){}this.video=null}p(c(n.prototype),"remove",this).call(this)}},{key:"seek",value:function(e){if(this.video){var t=this.getPosition();this.video.currentTime=e,this.trigger("seek",{type:"seek",position:t,offset:e})}}},{key:"getPlaybackRate",value:function(){return this.video?this.video.playbackRate:1}},{key:"setPlaybackRate",value:function(e){this.video&&(this.video.playbackRate=e,this.trigger("playbackrate",{type:"playbackrate",playbackRate:e}))}},{key:"getDuration",value:function(){return this._duration}},{key:"getPosition",value:function(){return this.video?this.video.currentTime:0}},{key:"getVolume",value:function(){return this.video?this.getMute()?0:this.video.volume:1}},{key:"getWidth",value:function(){return this.video?this.video.videoWidth:-1}},{key:"getHeight",value:function(){return this.video?this.video.videoHeight:-1}},{key:"setVolume",value:function(e){if(this.video){var t=this.video.muted;ie("number",e)&&(e<0&&(e=0),1<e&&(e=1),this.video.volume=e,this.trigger("volume",{type:"volume",volume:e}),t&&0<e&&this.setMute(!1),t||0!==e||this.setMute(!0))}}},{key:"setMute",value:function(){var e=!(0<arguments.length&&arguments[0]!==undefined)||arguments[0];this.video&&(this.video.muted=!!e,this.trigger("mute",{type:"mute",mute:!!e}))}},{key:"getMute",value:function(){return!!this.video&&this.video.muted}},{key:"setStretching",value:function(e){if(this.video)switch(e){case"none":case"contain":case"fill":case"cover":case"scale-down":this.video.style.objectFit=e;break;default:this.video.style.objectFit="contain"}}},{key:"getStretching",value:function(){return this.video.style.objectFit}},{key:"getBuffer",value:function(){if(!this.video)return[];for(var e=this.video.buffered,t=[],i=0;i<e.length;i++)t.push({start:e.start(i),end:e.end(i)});return t.sort(function(e,t){var i=e.start-t.start;return i||t.end-e.end})}},{key:"getMetrics",value:function(){var e=this.video;return e?{videoHeight:e.videoHeight,videoWidth:e.videoWidth,mozParsedFrames:e.mozParsedFrames,mozDecodedFrames:e.mozDecodedFrames,mozPresentedFrames:e.mozPresentedFrames,mozPaintedFrames:e.mozPaintedFrames,mozFrameDelay:e.mozFrameDelay,mozHasAudio:e.mozHasAudio,networkState:e.networkState,msHorizontalMirror:e.msHorizontalMirror,msInsertVideoEffect:e.msInsertVideoEffect,msIsStereo3D:e.msIsStereo3D,webkitAudioDecodedByteCount:e.webkitAudioDecodedByteCount,webkitVideoDecodedByteCount:e.webkitVideoDecodedByteCount,webkitDecodedFrameCount:e.webkitDecodedFrameCount,webkitDroppedFrameCount:e.webkitDroppedFrameCount}:p(c(n.prototype),"getMetrics",this).call(this)}},{key:"getTextTracks",value:function(){var t=this;return this.video?[].slice.call(this.video.textTracks).map(function(e){return t._addCustomTrack(e),e.customTrack}):[]}},{key:"setTextTrackEnable",value:function(e){var t=this.video&&this.video.textTracks,i=t&&t[e];i&&(i.customTrack||this._addCustomTrack(i),i.customTrack.mode="hidden",i.mode="hidden")}},{key:"setTextTrackDisable",value:function(e){var t=this.video&&this.video.textTracks,i=t&&t[e];i&&(i.customTrack||this._addCustomTrack(i),i.customTrack.mode="disabled",i.mode="disabled")}},{key:"getTextTrackCues",value:function(e){var t=this,i=this.video&&this.video.textTracks,n=i&&i[e];if(n)return[].slice.call(n.cues||[]).map(function(e){return t._addCustomCue(e),e.customCue})}},{key:"getTextTrackActiveCues",value:function(e){var t=this,i=this.video&&this.video.textTracks,n=i&&i[e];if(n)return[].slice.call(n.activeCues||[]).map(function(e){return t._addCustomCue(e),e.customCue})}},{key:"_setupEvents",value:function(){var t=this;n.mediaEvents.forEach(function(e){he(t.video,e,t._onVideoEvents)}),this.video.textTracks&&(he(this.video.textTracks,"change",this._onTextTracksChange),he(this.video.textTracks,"addtrack",this._onTextTracksAdd),he(this.video.textTracks,"removetrack",this._onTextTracksRemove))}},{key:"_removeEvents",value:function(){var t=this;if(this.video){n.mediaEvents.forEach(function(e){pe(t.video,e,t._onVideoEvents)});for(var e=0;e<this.video.textTracks.length;e++)pe(this.video.textTracks[e],"cuechange",this._onTextTrackCueChange);pe(this.video.textTracks,"change",this._onTextTracksChange),pe(this.video.textTracks,"addtrack",this._onTextTracksAdd),pe(this.video.textTracks,"removetrack",this._onTextTracksRemove)}}},{key:"_onTextTracksChange",value:function(){this.video&&this.trigger(On,this.getTextTracks())}},{key:"_onTextTracksAdd",value:function(e){if(this.video){var t=e.track;this._addCustomTrack(t),this.trigger(In,t.customTrack),he(t,"cuechange",this._onTextTrackCueChange)}}},{key:"_onTextTracksRemove",value:function(e){}},{key:"_onTextTrackCueChange",value:function(e){if(this.video){var t=e.target,i=this._getIndexByTrack(t);this.trigger(jn,{cues:this.getTextTrackCues(i),activeCues:this.getTextTrackActiveCues(i),track:t.customTrack})}}},{key:"_getIndexByTrack",value:function(e){for(var t=this.video.textTracks,i=t.length,n=0;n<i;n++)if(t[n]===e)return n;return-1}},{key:"_addCustomTrack",value:function(e){e.customTrack=e.customTrack||{};var t=e.customTrack;t.id=e.id,t.kind=e.kind,t.label=e.label,t.language=e.language,t.mode=e.mode}},{key:"_addCustomCue",value:function(e){e.customCue=e.customCue||{};var t=e.customCue;t.startTime=e.startTime,t.endTime=e.endTime,t.text=e.text}},{key:"_onVideoEvents",value:function(e){var t=e.type;switch(t){case"error":var i=this.video.error||{},n=i.message,r=i.code,o=this.video.networkState;if(3===r&&"HTML5Provider"===this.TAG&&W())return void this.play();n||3!==o||(n="networkError"),this.video_error_report&&this.trigger("error",{message:n,code:r,networkState:o,fatal:1<r});break;case"playing":this.trigger("play",e),this.trigger(t,e);break;case"durationchange":1!==this.video.duration&&(this._duration=this.video.duration,this.trigger("duration")),this.trigger(t,e);break;default:this.trigger(t,e)}}}]),n}();Ao.mediaEvents=["abort","canplay","canplaythrough","durationchange","emptied","ended","error","loadeddata","loadedmetadata","loadstart","mozaudioavailable","pause","play","playing","progress","ratechange","seeked","seeking","stalled","suspend","timeupdate","volumechange","waiting"],Ao.canPlay=function(e){var t=e.mimeType;return document.createElement("video").canPlayType(t)},Ao.isSupported=function(){return!C()||C()&&8<Y.major},Ao.isPlaybackRateSupported=function(){return!0},Ao.isHTML5=function(e){return!0},Ao.isFlash=function(e){return!1},Ao.version="0.37.10";var Do=function(e){function n(e,t){var i;return a(this,n),(i=h(this,c(n).call(this,e,t))).video_error_report=!1,i.TAG="DashjsProvider",i}return u(n,Ao),s(n,[{key:"loadFiles",value:function(){return new un(this.player._config.fileCdnPath+"/dash.js").load()}},{key:"setup",value:function(e){var t=this,i=e.file;p(c(n.prototype),"setup",this).call(this,{file:i}),this.file=i,"auto"===this.player._config.preload?this.loadDash():this.oncePlayer("beforePlay",function(){return t.loadDash()})}},{key:"loadDash",value:function(){this.dashPlayer=window.dashjs.MediaPlayer().create(),this.dashPlayer.initialize(this.video,this.file,!1)}},{key:"remove",value:function(){p(c(n.prototype),"remove",this).call(this),this.dashPlayer&&this.dashPlayer.reset()}}]),n}();Do.formats={"application/dash+xml":"dash"},Do.types=["mpd","dash"],Do.canPlay=function(e){var t=e.type;return 0<=Do.types.indexOf(t)?"maybe":""},Do.isSupported=function(){var e=window.MediaSource||window.WebKitMediaSource,t=window.SourceBuffer||window.WebKitSourceBuffer,i=e&&"function"==typeof e.isTypeSupported&&e.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),n=!t||t.prototype&&"function"==typeof t.prototype.appendBuffer&&"function"==typeof t.prototype.remove;return!!i&&!!n},Do.isFlash=function(e){return!1},Do.isHTML5=function(e){return!0},Do.HlsP2pisPlaybackRateSupported=function(){return!0},Do.isPlaybackRateSupported=function(){return!0},Do.version="2.9.0";var Ho=function(e){function o(e,t){var i;return a(this,o),t=t||{},(i=h(this,c(o).call(this,e,t))).video_error_report=!1,i.TAG="FlvjsProvider",i}return u(o,Ao),s(o,[{key:"loadFiles",value:function(){return new un(this.player._config.fileCdnPath+"/flv.js").load()}},{key:"setup",value:function(e){var r=this,t=e.file,i=e.isLive;p(c(o.prototype),"setup",this).call(this,{file:t}),this.onFlvError=function(e,t,i){var n="".concat(e,"_").concat(t);e===window.flvjs.ErrorTypes.NETWORK_ERROR&&(i.code&&(n+="_".concat(i.code)),i.msg&&(n+="_".concat(i.msg))),r.trigger(Bn,{message:n,details:t,fatal:!0,data:{type:e,details:t,other:i}})};var n=this.option["flv.js"]||{};this.flvPlayer=window.flvjs.createPlayer({type:"flv",url:t,isLive:!!i},n),this.flvPlayer.attachMediaElement(this.getMediaElement()),this.flvPlayer.on(window.flvjs.Events.ERROR,this.onFlvError),"auto"===this.player._config.preload?this.flvPlayer.load():this.oncePlayer("beforePlay",function(){return r.flvPlayer.load()})}},{key:"remove",value:function(){p(c(o.prototype),"remove",this).call(this),this.flvPlayer&&(this.flvPlayer.off(window.flvjs.Events.ERROR,this.onFlvError),this.flvPlayer.detachMediaElement(),this.flvPlayer.destroy())}}]),o}();Ho.formats={"video/flv":"FLV","video/x-flv":"FLV"},Ho.canPlay=function(e){var t=e.type,i=e.isLive;return"flv"===t&&(!i||i&&Ho.isLiveSupported())?"maybe":""},Ho.canPlaySource=function(){},Ho.isSupported=function(){return window.MediaSource&&window.MediaSource.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"')},Ho.isLiveSupported=function(){var e=$().browser;try{var t=e.msedge&&(15<e.version.major||15===e.version.major&&15048<=e.version.minor),i=!e.msedge||t;return window.fetch&&window.ReadableStream&&i}catch(n){return!1}},Ho.isFlash=function(e){return!1},Ho.isHTML5=function(e){return!0},Ho.HlsP2pisPlaybackRateSupported=function(){return!0},Ho.isPlaybackRateSupported=function(){return!0},Ho.version="1.4.2";var Bo=function(e){function n(e,t){var i;return a(this,n),t=t||{},(i=h(this,c(n).call(this,e,t))).onHlsError=i.onHlsError.bind(d(d(i))),i.option=t,i.video_error_report=!1,i.onPlayer("buffer",i._onPlayerBuffer.bind(d(d(i)))),i.TAG="HlsjsProvider",i}return u(n,Ao),s(n,[{key:"loadFiles",value:function(){return new un(this.player._config.fileCdnPath+"/hls.js").load()}},{key:"setup",value:function(e){var t=this,i=e.file;p(c(n.prototype),"setup",this).call(this,e),this.file=i,"auto"===this.player._config.preload?this.loadHls():this.oncePlayer(En,function(){return t.loadHls()})}},{key:"play",value:function(){var e=this.player.getState(),t=this.getPosition();return"idle"===e&&0<t&&this.seek(0),p(c(n.prototype),"play",this).call(this)}},{key:"loadHls",value:function(){var e={fLoader:function n(){return{XHRLoader:function(e){function t(){return a(this,t),h(this,c(t).apply(this,arguments))}return u(t,window.Hls.DefaultConfig.loader),s(t,[{key:"loadInternal",value:function(){var e,t=this.context;e=this.loader=new window.XMLHttpRequest;var i=this.stats;i.tfirst=0,i.loaded=0;var n=this.xhrSetup,r="https:"===window.location.protocol?t.url.replace(/^http:/,"https:"):t.url;try{if(n)try{n(e,r)}catch(o){e.open("GET",r,!0),n(e,r)}e.readyState||e.open("GET",r,!0)}catch(o){return void this.callbacks.onError({code:e.status,text:o.message},t,e)}t.rangeEnd&&e.setRequestHeader("Range","bytes="+t.rangeStart+"-"+(t.rangeEnd-1)),e.onreadystatechange=this.readystatechange.bind(this),e.onprogress=this.loadprogress.bind(this),e.responseType=t.responseType,this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),this.config.timeout),e.send()}}]),t}()}}().XHRLoader},t=g({},this.option["hls.js"]||{},e),i=this.hlsPlayer=new window.Hls(t);i.subtitleDisplay=!1,i.loadSource(this.file),i.attachMedia(this.video),i.on(window.Hls.Events.ERROR,this.onHlsError)}},{key:"onHlsError",value:function(e,t){var i=t.type,n=t.details,r=t.fatal,o="".concat(i,"_").concat(n);if(-1===[window.Hls.ErrorDetails.BUFFER_STALLED_ERROR,window.Hls.ErrorDetails.BUFFER_NUDGE_ON_STALL].indexOf(n)){if(i===window.Hls.ErrorTypes.NETWORK_ERROR){var a=t.networkDetails;a&&(a.status&&(o+="_".concat(a.status)),a.statusText&&(o+="_".concat(a.statusText)))}this.trigger(Bn,{message:o,fatal:r,details:n,data:t})}}},{key:"remove",value:function(){p(c(n.prototype),"remove",this).call(this),this.hlsPlayer&&(this.hlsPlayer.off(window.Hls.Events.ERROR,this.onHlsError),this.hlsPlayer.detachMedia(),this.hlsPlayer.destroy())}},{key:"_onPlayerBuffer",value:function(e){if("playing"===e.oldState){var t=this.getPosition(),i=this.getDuration();i-t<1&&0<t&&2<i&&(this.pause(),this.trigger("ended"))}}}]),n}();Bo.formats={"application/vnd.apple.mpegurl":"hls"},Bo.type=["m3u8","hls"],Bo.canPlay=function(e){var t=e.type;return(!e.isTimeShift||!W())&&0<=Bo.type.indexOf(t)},Bo.isHlsSupported=function(){var e=window.MediaSource||window.WebKitMediaSource,t=window.SourceBuffer||window.WebKitSourceBuffer,i=e&&"function"==typeof e.isTypeSupported&&e.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),n=!t||t.prototype&&"function"==typeof t.prototype.appendBuffer&&"function"==typeof t.prototype.remove;return!!i&&!!n},Bo.isSupported=function(){return Bo.isHlsSupported()},Bo.isFlash=function(e){return!1},Bo.isHTML5=function(e){return!0},Bo.HlsP2pisPlaybackRateSupported=function(){return!0},Bo.isPlaybackRateSupported=function(){return!0},Bo.version="0.12.4";var Io=function(e){function n(e,t){var i;return a(this,n),t=t||{},(i=h(this,c(n).call(this,e,t))).onHlsError=i.onHlsError.bind(d(d(i))),i.option=t,i.video_error_report=!1,i.onPlayer("buffer",i._onPlayerBuffer.bind(d(d(i)))),i.TAG="HlsPeer5Provider",i}return u(n,Ao),s(n,[{key:"loadFiles",value:function(){var e=this.option.customID,t=new un("https://api.peer5.com/peer5.js?id=".concat(e)).load(),i=new un("https://api.peer5.com/peer5.hlsjs.loader.js").load(),n=new un(this.player._config.fileCdnPath+"/hls.js").load();return Promise.all([t,i,n])}},{key:"setup",value:function(e){var t=this,i=e.file;p(c(n.prototype),"setup",this).call(this,e),this.file=i,"auto"===this.player._config.preload?this.loadHls():this.oncePlayer(En,function(){return t.loadHls()})}},{key:"play",value:function(){var e=this.player.getState(),t=this.getPosition();return"idle"===e&&0<t&&this.seek(0),p(c(n.prototype),"play",this).call(this)}},{key:"loadHls",value:function(){var e={fLoader:window.peer5&&window.peer5.HlsJsFragmentLoader,pLoader:window.peer5&&window.peer5.HlsJsPlaylistLoader},t=g({},this.option["hls.js"]||{},e),i=this.hlsPlayer=new window.Hls(t);i.subtitleDisplay=!1,i.loadSource(this.file),i.attachMedia(this.video),i.on(window.Hls.Events.ERROR,this.onHlsError)}},{key:"onHlsError",value:function(e,t){var i=t.type,n=t.details,r=t.fatal,o="".concat(i,"_").concat(n);if(-1===[window.Hls.ErrorDetails.BUFFER_STALLED_ERROR,window.Hls.ErrorDetails.BUFFER_NUDGE_ON_STALL].indexOf(n)){if(i===window.Hls.ErrorTypes.NETWORK_ERROR){var a=t.networkDetails;a&&(a.status&&(o+="_".concat(a.status)),a.statusText&&(o+="_".concat(a.statusText)))}this.trigger(Bn,{message:o,fatal:r,details:n,data:t})}}},{key:"remove",value:function(){p(c(n.prototype),"remove",this).call(this),this.hlsPlayer&&(this.hlsPlayer.off(window.Hls.Events.ERROR,this.onHlsError),this.hlsPlayer.detachMedia(),this.hlsPlayer.destroy())}},{key:"_onPlayerBuffer",value:function(e){if("playing"===e.oldState){var t=this.getPosition(),i=this.getDuration();i-t<1&&0<t&&2<i&&(this.pause(),this.trigger("ended"))}}}]),n}();Io.formats={"application/vnd.apple.mpegurl":"hls"},Io.type=["m3u8","hls"],Io.canPlay=function(e){var t=e.type;return(!e.isTimeShift||!W())&&0<=Io.type.indexOf(t)},Io.isHlsPeer5Supported=function(){var e=window.MediaSource||window.WebKitMediaSource,t=window.SourceBuffer||window.WebKitSourceBuffer,i=e&&"function"==typeof e.isTypeSupported&&e.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),n=!t||t.prototype&&"function"==typeof t.prototype.appendBuffer&&"function"==typeof t.prototype.remove;return!!i&&!!n},Io.isSupported=function(){return Io.isHlsPeer5Supported()},Io.isFlash=function(e){return!1},Io.isHTML5=function(e){return!0},Io.HlsP2pisPlaybackRateSupported=function(){return!0},Io.isPlaybackRateSupported=function(){return!0},Io.version="0.12.4";var Oo=function(e){function n(e,t){var i;return a(this,n),(i=h(this,c(n).call(this))).player=e,i.p_player_events=[],i.p_dom_events=[],i.option=t,i}return u(n,Me),s(n,[{key:"onPlayer",value:function(e,t){this.player.on(e,t),this.p_player_events.push({evt:e,fn:t})}},{key:"oncePlayer",value:function(e,t){this.player.once(e,t),this.p_player_events.push({evt:e,fn:t})}},{key:"onDom",value:function(e,t,i){var n=!(3<arguments.length&&arguments[3]!==undefined)||arguments[3];he(e,t,i),n&&this.p_dom_events.push({ele:e,evt:t,fn:i})}},{key:"remove",value:function(){var t=this;this.p_player_events.forEach(function(e){return t.player.off(e.evt,e.fn)}),this.p_dom_events.forEach(function(e){return pe(e.ele,e.evt,e.fn)})}}]),n}();Oo.isSupported=ae,Oo.defaultOptions={};var jo=function(e){function n(e,t){var i;return a(this,n),(i=h(this,c(n).call(this,e,t))).removeResizeListener=null,i}return u(n,Oo),s(n,[{key:"init",value:function(){var o=this,a=0<arguments.length&&arguments[0]!==undefined?arguments[0]:{};return new un(this.player._config.fileCdnPath+"/danmaku.js").load().then(function(){var e=o.player.dom.container.querySelector(".".concat(mt)),t=new window.Danmaku(g({container:e},a));Wn(o,t).method("resize").method("show").method("hide").method("destroy").method("clear"),o.danmaku=t;var i=o.getCompaVisibility(),n=function n(){ie("function",o.resize)&&o.resize()},r=function r(){o.danmaku.clear(),o.disableSend=document[i.hidden]};return o.onPlayer("play",function(){t.paused=!1}),o.onPlayer("pause",function(){t.paused=!0}),o.onPlayer("resize",n),o.onDom(window,"resize",n),o.removeResizeListener=Ee(e,n),i&&o.onDom(document,i.visibilitychange,r),t})}},{key:"emit",value:function(e){this.disableSend||this.danmaku.emit(e)}},{key:"getCompaVisibility",value:function(){return ie("undefined",document.hidden)?ie("undefined",document.msHidden)?ie("undefined",document.webkitHidden)?void 0:{hidden:"webkitHidden",visibilitychange:"webkitvisibilitychange"}:{hidden:"msHidden",visibilitychange:"msvisibilitychange"}:{hidden:"hidden",visibilitychange:"visibilitychange"}}},{key:"setSpeed",value:function(e){this.danmaku&&(this.danmaku.speed=e)}},{key:"remove",value:function(){p(c(n.prototype),"remove",this).call(this),this.removeResizeListener&&this.removeResizeListener(),ie("function",this.destroy)&&this.destroy()}}]),n}();jo.isSupported=function(){var e=$();return!(e.browser.msie&&8===e.browser.version.major)};var qo=function(e){function n(e,t){var i;return a(this,n),(i=h(this,c(n).call(this,e,t))).timer=new cr(g({},t,{gap:i.option.gap||6e4})),i.timer.on("tick",function(e){i.trigger("tick",e)}),i.onPlayer("play",function(){i.timer.start()}),i.onPlayer("pause",function(){i.timer.stop()}),i.onPlayer("idle",function(){i.timer.stop()}),i.onPlayer("complete",function(){i.timer.stop()}),i.onDom(document,"visibilitychange",function(){i.timer.tick()}),i.onDom(window,"pagehide",function(){i.timer.tick()}),i.onDom(window,"unload",function(){i.timer.tick()}),i.onDom(window,"beforeunload",function(){i.timer.tick()}),ie("function",i.option.onTick)&&i.on("tick",i.option.onTick),i}return u(n,Oo),s(n,[{key:"remove",value:function(){p(c(n.prototype),"remove",this).call(this),this.timer.stop()}}]),n}();qo.isSupported=oe;var Wo=function ra(e,t){var i,n,r,o,a,s,l=!1;t||(t={}),i=t.debug||!1;try{if(r=function(){var t=document.getSelection();if(!t.rangeCount)return function(){};for(var e=document.activeElement,i=[],n=0;n<t.rangeCount;n++)i.push(t.getRangeAt(n));switch(e.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":e.blur();break;default:e=null}return t.removeAllRanges(),function(){"Caret"===t.type&&t.removeAllRanges(),t.rangeCount||i.forEach(function(e){t.addRange(e)}),e&&e.focus()}}(),o=document.createRange(),a=document.getSelection(),(s=document.createElement("span")).textContent=e,s.style.all="unset",s.style.position="fixed",s.style.top=0,s.style.clip="rect(0, 0, 0, 0)",s.style.whiteSpace="pre",s.style.webkitUserSelect="text",s.style.MozUserSelect="text",s.style.msUserSelect="text",s.style.userSelect="text",document.body.appendChild(s),o.selectNode(s),a.addRange(o),!document.execCommand("copy"))throw new Error("copy command was unsuccessful");l=!0}catch(u){i&&console.error("unable to copy using execCommand: ",u),i&&console.warn("trying IE specific stuff");try{window.clipboardData.setData("text",e),l=!0}catch(u){i&&console.error("unable to copy using clipboardData: ",u),i&&console.error("falling back to prompt"),n=function Zh(t){var i=(/mac os x/i.test(navigator.userAgent)?"⌘":"Ctrl")+"+C";return t.replace(/#{\s*key\s*}/g,i)}("message"in t?t.message:"Copy to clipboard: #{key}, Enter"),window.prompt(n,e)}}finally{a&&("function"==typeof a.removeRange?a.removeRange(o):a.removeAllRanges()),s&&document.body.removeChild(s),r()}return l},zo=function(e){function i(e,t){var o;return a(this,i),(o=h(this,c(i).call(this,e,t))).logs=[],o.errorLogUrl=e._config.errorLogUrl,o.onPlayer(hn,function(){o.player._config.contextMenus.unshift({key:"copy-log",text:o.player._status.localization["Copy debug info"]},{key:"upload-log",text:o.player._status.localization["Upload debug info"]})}),o.onPlayer(vn,function(e){var t=e.key;"copy-log"===t&&o.copyLog(),"upload-log"===t&&o.uploadLog()}),o.onPlayer("all",function(e){for(var t=arguments.length,i=new Array(1<t?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];var r=ye();o.logs.push({type:e,time:r,args:i})}),o.onPlayer("error",function(e){var t=o.getOtherInfo();t.errorId=e.errorId,(t.error=e).message===pr.Error.NotAllowedError&&o.player._provider&&o.player._provider.flash||o.uploadError(t)}),o}return u(i,Oo),s(i,[{key:"copyLog",value:function(){var e=this.getDebugInfo();Wo(JSON.stringify(e)),this.player.model.bezel["switch"](at)}},{key:"uploadLog",value:function(){var e=this.errorLogUrl,t=this.getDebugInfo();e&&uo(e,t),this.player.model.bezel["switch"](at)}},{key:"uploadError",value:function(e){var t=this.errorLogUrl;t&&uo(t,e)}},{key:"filterLog",value:function(){var o=[];return this.logs.forEach(function(e,t,i){var n=i[t-1],r=i[t+1];"time"===e.type&&n&&"time"===n.type&&r&&"time"===r.type||o.push(e)}),this.logs=o}},{key:"getDebugInfo",value:function(){var e=this.filterLog(),t=this.getOtherInfo();return t.log=e,t}},{key:"getOtherInfo",value:function(){var e=g({},this.player._status,{localization:""}),t=this.player._config,i=$(),n={};this.player._provider&&(n.name=this.player._provider.name);var r=se(this.player.plugin),o=document.getElementById(this.player._config.containerId),a=o&&o.outerHTML;return{uniqId:e.uniqId,status:e,config:t,env:i,provider:n,plugins:r,ua:navigator.userAgent,version:"0.37.10",url:window.location.href,documentTitle:document.title,html:a,cookie:document.cookie}}}]),i}();zo.isSupported=oe,zo.defaultOptions={};var Vo=function(e){function n(e,t){var i;return a(this,n),(i=h(this,c(n).call(this,e,t))).player=e,i.option=t,i.TAG="vrProvider",i.inited=!1,i.isFullscreen=!1,i}return u(n,Ao),s(n,[{key:"loadFiles",value:function(){return new un("https://static.mudu.tv/mudu-vr-player/v0.1.0/mudu-vr-player.umd.js").load()}},{key:"setup",value:function(){this.inited&&this.destroy(),this.initVRPlayer()}},{key:"initVRPlayer",value:function(){var e=this;this.inited=!0,this.containerElem=this.player.dom.videoWrap,this.videoElem=this.player.dom.videoWrap.querySelector("video"),this.containerElem.classList.add("mudu-player-vr-mode"),this.vrPlayer=new window.muduVRPlayer.VRPlayer(this.containerElem,this.videoElem,g({},this.option,{onSuccess:function(){return e._onVRInitSuccess()}})),this.subEvents()}},{key:"destroy",value:function(){this.vrPlayer.destroy(),this.inited=!1}},{key:"subEvents",value:function(){var t=this;this.onDom(this.containerElem,"click",function(e){e.stopPropagation()}),this.onDom(window,"resize",function(){t.vrPlayer.resize()}),this.onPlayer(bn,function(e){setTimeout(function(){t.vrPlayer.resize(t.containerElem.clientWidth,t.containerElem.clientHeight)},0)}),this.oncePlayer(dn,function(e){t.destroy()})}},{key:"_onVRInitSuccess",value:function(){this.videoElem.classList.add("mudu-hide-video"),document.body.appendChild(this.videoElem),"function"==typeof this.option.onSuccess&&this.option.onSuccess()}}]),n}();Vo.isSupported=function(){return!0},Vo.defaultOptions={projection:"sphere"},Vo.canPlay=function(e){return"flash"!==e},Vo.isLiveSupported=function(){return!0};var No=0,Uo={};function Qo(e){if(!document.getElementById(e))throw new Error("muduPlayer(container): container should be an id of a div in the body, but not found");if(Uo[e]&&Uo[e]._status)return Uo[e];No++;var t=new Fo(e);return(Uo[e]=t)._status.index=No,t}return Qo.VERSION="0.37.10",Qo.setDefaultOptions=tt,Qo.getDefaultOptions=et,Qo.registerProvider=Ne,Qo.registerExtraProvider=function oa(e,t){Ne(e,t,!0)},Qo.getProvider=function aa(e){for(var t=0;t<ze.length;t++){var i=ze[t];if(i.name===e)return i}},Qo.getExtraProvider=function sa(t){var e=Ve.filter(function(e){return e.name===t});if(1===e.length)return e[0]},Qo.getProviders=Ue,Qo.getExtraProviders=Qe,Qo.chooseProvider=Xe,Qo.registerPlugin=function la(e,t){Co[e]?console.warn("provider [".concat(e,"] is existed, so it will not be register twice, you can change a name and retry")):(Co[e]={name:e,Plugin:t},tt({plugin:l({},e,t.defaultOptions)}))},Qo.getPlugin=function ua(e){return Co[e]||null},Qo.getPlugins=Ro,Qo.utils={formatPlaylist:Je,Timer:cr,ScriptLoader:un,browser:Z,Cache:dr,delegates:Wn},Qo.registerExtraProvider("vr",Vo),Qo.registerProvider("html5",Ao),Qo.registerProvider("dash",Do),Qo.registerProvider("flvjs",Ho),Qo.registerProvider("hlsjs",Bo),Qo.registerProvider("hlsPeer5",Io),Qo.registerProvider("flash",pr),Qo.registerPlugin("plugin",Oo),Qo.registerPlugin("tick",qo),Qo.registerPlugin("danmaku",jo),Qo.registerPlugin("log",zo),Qo});
//# sourceMappingURL=mudu-player.min.js.map
